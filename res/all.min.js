/* all.min.js - Tiger skin scripts */
var VER='1.3.1',DEBUG=false;
;Texts = {closeWindow:'Close window',okButton:'OK',warning:'Warning',error:'Error',today:'today',yesterday:'yesterday',daysAgo:'{0} days ago',monthsAgo:'{0} months ago',yearsAgo:'{0} years ago',addCart:'Add to Cart',shoppingCart:'Shopping cart',edit:'Edit',continueShopping:'Continue shopping',buyNow:'Buy Now',processedByPaypal:'Payment processed by PayPal',viewCart:'View Cart',emptyCart:'Empty Cart',removeAllItems:'Remove all items?',yes:'Yes',no:'No',item:'item',items:'items',success:'Success',couponCode:'Coupon code',redeem:'Redeem',noSuch:'No such coupon exists!',expired:'The coupon code <b>{0}</b> has expired!',lowerThanCurrent:'This coupon offers lower discount than the current <b>{0}</b>.',reclaimed:'This coupon has already been used!',subtotal:'Subtotal',total:'Total',shippingAndHandling:'Shipping and handling',reduction:'Reduction',discount:'Discount',tax:'Tax',remove:'Remove',couponAccepted:'Coupon code accepted, discounting <b>{0}</b>.',couponRemoved:'Coupon has been removed.',amountLowerThan:'The amount is lower than the discount <b>{0}</b>.',addMoreItems:'Add {0} more item(s) to use this coupon!',validAbove:'Valid only above {0} cart value.',higherThanTotal:'Coupon provides higher discount (<b>{0}</b>) than the cart total.',minAmountWarning:'This coupon can only be used if the total amount exceeds <b>{0}</b>.',minQuantityWarning:'This coupon can only be used if the number of items exceeds <b>{0}</b>.',maxNItems:'Maximum <b>{0}</b> items allowed!',share:'Share',shareOn:'Share on',checkOutThis:'Check this out',localWarning:'CanÂ´t share local albums. Please upload your album first!',foundNTimes:'{0} image(s)',notFound:'not found',search:'Search',newImages:'New images',label:'Label',return:'return',and:'and',newItem:'NEW',today:'today',inTheLastDay:'in the last day',inThePastNDays:'in the past {0} days',inThePastNMonths:'in the past {0} months',inThePastNYears:'in the past {0} years',sinceMyLastVisit:'since my last visit',imagesAdded:'Images added',imagesModified:'Images modified',imagesTaken:'Images taken',startSlideshow:'Start slideshow',atFirstPage:'At first page',atLastPage:'At last page',atLastPageQuestion:'Where to go next?',startOver:'Start over',backToHome:'Back to home',stop:'Stop',pause:'Pause',upOneLevel:'Up one level',backToIndex:'Back to index page',previousPicture:'Previous picture',nextPicture:'Next picture',previousFolder:'Previous folder',nextFolder:'Next folder',oneToOneSize:'1:1 size',fitToScreen:'Fit to screen',showInfo:'Show caption / info',hideInfo:'Hide caption / info',showThumbs:'Show thumbnails',hideThumbs:'Hide thumbnails',clickToOpen:'Click to open this document with the associated viewer',metaBtn:'Photo data',metaLabel:'Display photographic (Exif/Iptc) data',mapBtn:'Map',mapLabel:'Show the photo location on map',shopBtn:'Buy',shopLabel:'Add this item to the shopping cart',shareBtn:'Share',shareLabel:'Share this photo over social sites',download:'Download',print:'Print',printLabel:'Print out this photo on your printer',fotomotoBtn:'Buy / Share',fotomotoLabel:'Buy prints or digital files, share, send free eCards',mostphotosBtn:'Purchase',mostphotosLabel:'Download this image from <b>mostphotos.com</b>!',regionsBtn:'People',regionsLabel:'Show tagged people',sendFeedback:'Send feedback',message:'Message',subject:'Subject',comment:'Comment',yourEmail:'Your email address',send:'Send',messageSent:'Message sent',errorSending:'Error sending email!',tooLong:'Text is too long or too many items!',emailMissing:'Email is misssing or wrong format!',noItemsSelected:'No items selected',selectItemsHint:'Select the desired items first!',scrollTopTooltip:'Top',more:'more',less:'less',locationWarning:'Works only when uploaded',cookiePolicyText:'This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.',cookiePolicyAgree:'Got it',cookiePolicyLearnMore:'Learn more'};
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){"use strict";function e(t){if(void 0===Function.prototype.name){var e=/function\s([^(]{1,})\(/,n=e.exec(t.toString());return n&&n.length>1?n[1].trim():""}return void 0===t.prototype?t.constructor.name:t.prototype.constructor.name}function n(t){return"true"===t||"false"!==t&&(isNaN(1*t)?t:parseFloat(t))}function i(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var o="6.3.1",a={version:o,_plugins:{},_uuids:[],rtl:function(){return"rtl"===t("html").attr("dir")},plugin:function(t,n){var o=n||e(t),a=i(o);this._plugins[a]=this[o]=t},registerPlugin:function(t,n){var o=n?i(n):e(t.constructor).toLowerCase();t.uuid=this.GetYoDigits(6,o),t.$element.attr("data-"+o)||t.$element.attr("data-"+o,t.uuid),t.$element.data("zfPlugin")||t.$element.data("zfPlugin",t),t.$element.trigger("init.zf."+o),this._uuids.push(t.uuid)},unregisterPlugin:function(t){var n=i(e(t.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(t.uuid),1),t.$element.removeAttr("data-"+n).removeData("zfPlugin").trigger("destroyed.zf."+n);for(var o in t)t[o]=null},reInit:function(e){var n=e instanceof t;try{if(n)e.each(function(){t(this).data("zfPlugin")._init()});else{var o=typeof e,a=this,s={object:function(e){e.forEach(function(e){e=i(e),t("[data-"+e+"]").foundation("_init")})},string:function(){e=i(e),t("[data-"+e+"]").foundation("_init")},undefined:function(){this.object(Object.keys(a._plugins))}};s[o](e)}}catch(t){console.error(t)}finally{return e}},GetYoDigits:function(t,e){return t=t||6,Math.round(Math.pow(36,t+1)-Math.random()*Math.pow(36,t)).toString(36).slice(1)+(e?"-"+e:"")},reflow:function(e,i){"undefined"==typeof i?i=Object.keys(this._plugins):"string"==typeof i&&(i=[i]);var o=this;t.each(i,function(i,a){var s=o._plugins[a],r=t(e).find("[data-"+a+"]").addBack("[data-"+a+"]");r.each(function(){var e=t(this),i={};if(e.data("zfPlugin"))return void console.warn("Tried to initialize "+a+" on an element that already has a Foundation plugin.");if(e.attr("data-options")){e.attr("data-options").split(";").forEach(function(t,e){var o=t.split(":").map(function(t){return t.trim()});o[0]&&(i[o[0]]=n(o[1]))})}try{e.data("zfPlugin",new s(t(this),i))}catch(t){console.error(t)}finally{return}})})},getFnName:e,transitionend:function(t){var e,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=document.createElement("div");for(var o in n)"undefined"!=typeof i.style[o]&&(e=n[o]);return e?e:(e=setTimeout(function(){t.triggerHandler("transitionend",[t])},1),"transitionend")}};a.util={throttle:function(t,e){var n=null;return function(){var i=this,o=arguments;null===n&&(n=setTimeout(function(){t.apply(i,o),n=null},e))}}};var s=function(n){var i=typeof n,o=t("meta.foundation-mq"),s=t(".no-js");if(o.length||t('<meta class="foundation-mq">').appendTo(document.head),s.length&&s.removeClass("no-js"),"undefined"===i)a.MediaQuery._init(),a.reflow(this);else{if("string"!==i)throw new TypeError("We're sorry, "+i+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var r=Array.prototype.slice.call(arguments,1),l=this.data("zfPlugin");if(void 0===l||void 0===l[n])throw new ReferenceError("We're sorry, '"+n+"' is not an available method for "+(l?e(l):"this element")+".");1===this.length?l[n].apply(l,r):this.each(function(e,i){l[n].apply(t(i).data("zfPlugin"),r)})}return this};window.Foundation=a,t.fn.foundation=s,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o})}(jQuery),!function(t){function e(t){var e={};return"string"!=typeof t?e:(t=t.trim().slice(1,-1))?e=t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],o=n[1];return i=decodeURIComponent(i),o=void 0===o?null:decodeURIComponent(o),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(o):t[i]=[t[i],o]:t[i]=o,t},{}):e}var n={queries:[],current:"",_init:function(){var n,i=this,o=t(".foundation-mq").css("font-family");n=e(o);for(var a in n)n.hasOwnProperty(a)&&i.queries.push({name:a,value:"only screen and (min-width: "+n[a]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(t){var e=this.get(t);return!!e&&window.matchMedia(e).matches},is:function(t){return t=t.trim().split(" "),t.length>1&&"only"===t[1]?t[0]===this._getCurrentSize():this.atLeast(t[0])},get:function(t){for(var e in this.queries)if(this.queries.hasOwnProperty(e)){var n=this.queries[e];if(t===n.name)return n.value}return null},_getCurrentSize:function(){for(var t,e=0;e<this.queries.length;e++){var n=this.queries[e];window.matchMedia(n.value).matches&&(t=n)}return"object"==typeof t?t.name:t},_watcher:function(){var e=this;t(window).on("resize.zf.mediaquery",function(){var n=e._getCurrentSize(),i=e.current;n!==i&&(e.current=n,t(window).trigger("changed.zf.mediaquery",[n,i]))})}};Foundation.MediaQuery=n,window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n&&n.parentNode&&n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),Foundation.MediaQuery=n}(jQuery),!function(t){function e(t){var e={};for(var n in t)e[t[n]]=t[n];return e}var n={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},i={},o={keys:e(n),parseKey:function(t){var e=n[t.which||t.keyCode]||String.fromCharCode(t.which).toUpperCase();return e=e.replace(/\W+/,""),t.shiftKey&&(e="SHIFT_"+e),t.ctrlKey&&(e="CTRL_"+e),t.altKey&&(e="ALT_"+e),e=e.replace(/_$/,"")},handleKey:function(e,n,o){var a,s,r,l=i[n],u=this.parseKey(e);if(!l)return console.warn("Component not defined!");if(a="undefined"==typeof l.ltr?l:Foundation.rtl()?t.extend({},l.ltr,l.rtl):t.extend({},l.rtl,l.ltr),s=a[u],r=o[s],r&&"function"==typeof r){var d=r.apply();(o.handled||"function"==typeof o.handled)&&o.handled(d)}else(o.unhandled||"function"==typeof o.unhandled)&&o.unhandled()},findFocusable:function(e){return!!e&&e.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return!(!t(this).is(":visible")||t(this).attr("tabindex")<0)})},register:function(t,e){i[t]=e},trapFocus:function(t){var e=Foundation.Keyboard.findFocusable(t),n=e.eq(0),i=e.eq(-1);t.on("keydown.zf.trapfocus",function(t){t.target===i[0]&&"TAB"===Foundation.Keyboard.parseKey(t)?(t.preventDefault(),n.focus()):t.target===n[0]&&"SHIFT_TAB"===Foundation.Keyboard.parseKey(t)&&(t.preventDefault(),i.focus())})},releaseFocus:function(t){t.off("keydown.zf.trapfocus")}};Foundation.Keyboard=o}(jQuery),!function(t){function e(t,e,n){function i(r){s||(s=r),a=r-s,n.apply(e),a<t?o=window.requestAnimationFrame(i,e):(window.cancelAnimationFrame(o),e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]))}var o,a,s=null;return 0===t?(n.apply(e),void e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e])):void(o=window.requestAnimationFrame(i))}function n(e,n,a,s){function r(){e||n.hide(),l(),s&&s.apply(n)}function l(){n[0].style.transitionDuration=0,n.removeClass(u+" "+d+" "+a)}if(n=t(n).eq(0),n.length){var u=e?i[0]:i[1],d=e?o[0]:o[1];l(),n.addClass(a).css("transition","none"),requestAnimationFrame(function(){n.addClass(u),e&&n.show()}),requestAnimationFrame(function(){n[0].offsetWidth,n.css("transition","").addClass(d)}),n.one(Foundation.transitionend(n),r)}}var i=["mui-enter","mui-leave"],o=["mui-enter-active","mui-leave-active"],a={animateIn:function(t,e,i){n(!0,t,e,i)},animateOut:function(t,e,i){n(!1,t,e,i)}};Foundation.Move=e,Foundation.Motion=a}(jQuery),!function(t){function e(t,e,i,o){var a,s,r,l,u=n(t);if(e){var d=n(e);s=u.offset.top+u.height<=d.height+d.offset.top,a=u.offset.top>=d.offset.top,r=u.offset.left>=d.offset.left,l=u.offset.left+u.width<=d.width+d.offset.left}else s=u.offset.top+u.height<=u.windowDims.height+u.windowDims.offset.top,a=u.offset.top>=u.windowDims.offset.top,r=u.offset.left>=u.windowDims.offset.left,l=u.offset.left+u.width<=u.windowDims.width;var f=[s,a,r,l];return i?r===l==!0:o?a===s==!0:f.indexOf(!1)===-1}function n(t,e){if(t=t.length?t[0]:t,t===window||t===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var n=t.getBoundingClientRect(),i=t.parentNode.getBoundingClientRect(),o=document.body.getBoundingClientRect(),a=window.pageYOffset,s=window.pageXOffset;return{width:n.width,height:n.height,offset:{top:n.top+a,left:n.left+s},parentDims:{width:i.width,height:i.height,offset:{top:i.top+a,left:i.left+s}},windowDims:{width:o.width,height:o.height,offset:{top:a,left:s}}}}function i(t,e,i,o,a,s){var r=n(t),l=e?n(e):null;switch(i){case"top":return{left:Foundation.rtl()?l.offset.left-r.width+l.width:l.offset.left,top:l.offset.top-(r.height+o)};case"left":return{left:l.offset.left-(r.width+a),top:l.offset.top};case"right":return{left:l.offset.left+l.width+a,top:l.offset.top};case"center top":return{left:l.offset.left+l.width/2-r.width/2,top:l.offset.top-(r.height+o)};case"center bottom":return{left:s?a:l.offset.left+l.width/2-r.width/2,top:l.offset.top+l.height+o};case"center left":return{left:l.offset.left-(r.width+a),top:l.offset.top+l.height/2-r.height/2};case"center right":return{left:l.offset.left+l.width+a+1,top:l.offset.top+l.height/2-r.height/2};case"center":return{left:r.windowDims.offset.left+r.windowDims.width/2-r.width/2,top:r.windowDims.offset.top+r.windowDims.height/2-r.height/2};case"reveal":return{left:(r.windowDims.width-r.width)/2,top:r.windowDims.offset.top+o};case"reveal full":return{left:r.windowDims.offset.left,top:r.windowDims.offset.top};case"left bottom":return{left:l.offset.left,top:l.offset.top+l.height+o};case"right bottom":return{left:l.offset.left+l.width+a-r.width,top:l.offset.top+l.height+o};default:return{left:Foundation.rtl()?l.offset.left-r.width+l.width:l.offset.left+a,top:l.offset.top+l.height+o}}}Foundation.Box={ImNotTouchingYou:e,GetDimensions:n,GetOffsets:i}}(jQuery),!function(t){var e={Feather:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zf";e.attr("role","menubar");var i=e.find("li").attr({role:"menuitem"}),o="is-"+n+"-submenu",a=o+"-item",s="is-"+n+"-submenu-parent";i.each(function(){var e=t(this),i=e.children("ul");i.length&&(e.addClass(s).attr({"aria-haspopup":!0,"aria-label":e.children("a:first").text()}),"drilldown"===n&&e.attr({"aria-expanded":!1}),i.addClass("submenu "+o).attr({"data-submenu":"",role:"menu"}),"drilldown"===n&&i.attr({"aria-hidden":!0})),e.parent("[data-submenu]").length&&e.addClass("is-submenu-item "+a)})},Burn:function(t,e){var n="is-"+e+"-submenu",i=n+"-item",o="is-"+e+"-submenu-parent";t.find(">li, .menu, .menu > li").removeClass(n+" "+i+" "+o+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=e}(jQuery),!function(t){function e(){s(),i(),o(),a(),n()}function n(e){var n=t("[data-yeti-box]"),i=["dropdown","tooltip","reveal"];if(e&&("string"==typeof e?i.push(e):"object"==typeof e&&"string"==typeof e[0]?i.concat(e):console.error("Plugin names must be strings")),n.length){var o=i.map(function(t){return"closeme.zf."+t}).join(" ");t(window).off(o).on(o,function(e,n){var i=e.namespace.split(".")[0],o=t("[data-"+i+"]").not('[data-yeti-box="'+n+'"]');o.each(function(){var e=t(this);e.triggerHandler("close.zf.trigger",[e])})})}}function i(e){var n=void 0,i=t("[data-resize]");i.length&&t(window).off("resize.zf.trigger").on("resize.zf.trigger",function(o){n&&clearTimeout(n),n=setTimeout(function(){r||i.each(function(){t(this).triggerHandler("resizeme.zf.trigger")}),i.attr("data-events","resize")},e||10)})}function o(e){var n=void 0,i=t("[data-scroll]");i.length&&t(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(o){n&&clearTimeout(n),n=setTimeout(function(){r||i.each(function(){t(this).triggerHandler("scrollme.zf.trigger")}),i.attr("data-events","scroll")},e||10)})}function a(e){var n=t("[data-mutate]");n.length&&r&&n.each(function(){t(this).triggerHandler("mutateme.zf.trigger")})}function s(){if(!r)return!1;var e=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),n=function(e){var n=t(e[0].target);switch(e[0].type){case"attributes":"scroll"===n.attr("data-events")&&"data-events"===e[0].attributeName&&n.triggerHandler("scrollme.zf.trigger",[n,window.pageYOffset]),"resize"===n.attr("data-events")&&"data-events"===e[0].attributeName&&n.triggerHandler("resizeme.zf.trigger",[n]),"style"===e[0].attributeName&&(n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]));break;case"childList":n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]);break;default:return!1}};if(e.length)for(var i=0;i<=e.length-1;i++){var o=new r(n);o.observe(e[i],{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-events","style"]})}}var r=function(){for(var t=["WebKit","Moz","O","Ms",""],e=0;e<t.length;e++)if(t[e]+"MutationObserver"in window)return window[t[e]+"MutationObserver"];return!1}(),l=function(e,n){e.data(n).split(" ").forEach(function(i){t("#"+i)["close"===n?"trigger":"triggerHandler"](n+".zf.trigger",[e])})};t(document).on("click.zf.trigger","[data-open]",function(){l(t(this),"open")}),t(document).on("click.zf.trigger","[data-close]",function(){var e=t(this).data("close");e?l(t(this),"close"):t(this).trigger("close.zf.trigger")}),t(document).on("click.zf.trigger","[data-toggle]",function(){var e=t(this).data("toggle");e?l(t(this),"toggle"):t(this).trigger("toggle.zf.trigger")}),t(document).on("close.zf.trigger","[data-closable]",function(e){e.stopPropagation();var n=t(this).data("closable");""!==n?Foundation.Motion.animateOut(t(this),n,function(){t(this).trigger("closed.zf")}):t(this).fadeOut().trigger("closed.zf")}),t(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var e=t(this).data("toggle-focus");t("#"+e).triggerHandler("toggle.zf.trigger",[t(this)])}),t(window).on("load",function(){e()}),Foundation.IHearYou=e}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"dropdown"),this._init(),Foundation.registerPlugin(this,"DropdownMenu"),Foundation.Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}return _createClass(e,[{key:"_init",value:function(){var t=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('[role="menuitem"]'),this.$tabs=this.$element.children('[role="menuitem"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),this.$element.hasClass(this.options.rightClass)||"right"===this.options.alignment||Foundation.rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",t.addClass("opens-left")):t.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_isVertical",value:function(){return"block"===this.$tabs.css("display")}},{key:"_events",value:function(){var e=this,n="ontouchstart"in window||"undefined"!=typeof window.ontouchstart,i="is-dropdown-submenu-parent",o=function(o){var a=t(o.target).parentsUntil("ul","."+i),s=a.hasClass(i),r="true"===a.attr("data-is-click"),l=a.children(".is-dropdown-submenu");if(s)if(r){if(!e.options.closeOnClick||!e.options.clickOpen&&!n||e.options.forceFollow&&n)return;o.stopImmediatePropagation(),o.preventDefault(),e._hide(a)}else o.preventDefault(),o.stopImmediatePropagation(),e._show(l),a.add(a.parentsUntil(e.$element,"."+i)).attr("data-is-click",!0)};(this.options.clickOpen||n)&&this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",o),e.options.closeOnClickInside&&this.$menuItems.on("click.zf.dropdownmenu",function(n){var o=t(this),a=o.hasClass(i);a||e._hide()}),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownmenu",function(n){var o=t(this),a=o.hasClass(i);a&&(clearTimeout(o.data("_delay")),o.data("_delay",setTimeout(function(){e._show(o.children(".is-dropdown-submenu"))},e.options.hoverDelay)))}).on("mouseleave.zf.dropdownmenu",function(n){var o=t(this),a=o.hasClass(i);if(a&&e.options.autoclose){if("true"===o.attr("data-is-click")&&e.options.clickOpen)return!1;clearTimeout(o.data("_delay")),o.data("_delay",setTimeout(function(){e._hide(o)},e.options.closingTime))}}),this.$menuItems.on("keydown.zf.dropdownmenu",function(n){var i,o,a=t(n.target).parentsUntil("ul",'[role="menuitem"]'),s=e.$tabs.index(a)>-1,r=s?e.$tabs:a.siblings("li").add(a);r.each(function(e){if(t(this).is(a))return i=r.eq(e-1),void(o=r.eq(e+1))});var l=function(){a.is(":last-child")||(o.children("a:first").focus(),n.preventDefault())},u=function(){i.children("a:first").focus(),n.preventDefault()},d=function(){var t=a.children("ul.is-dropdown-submenu");t.length&&(e._show(t),a.find("li > a:first").focus(),n.preventDefault())},f=function(){var t=a.parent("ul").parent("li");t.children("a:first").focus(),e._hide(t),n.preventDefault()},h={open:d,close:function(){e._hide(e.$element),e.$menuItems.find("a:first").focus(),n.preventDefault()},handled:function(){n.stopImmediatePropagation()}};s?e._isVertical()?Foundation.rtl()?t.extend(h,{down:l,up:u,next:f,previous:d}):t.extend(h,{down:l,up:u,next:d,previous:f}):Foundation.rtl()?t.extend(h,{next:u,previous:l,down:d,up:f}):t.extend(h,{next:l,previous:u,down:d,up:f}):Foundation.rtl()?t.extend(h,{next:f,previous:d,down:l,up:u}):t.extend(h,{next:d,previous:f,down:l,up:u}),Foundation.Keyboard.handleKey(n,"DropdownMenu",h)})}},{key:"_addBodyHandler",value:function(){var e=t(document.body),n=this;e.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",function(t){var i=n.$element.find(t.target);i.length||(n._hide(),e.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu"))})}},{key:"_show",value:function(e){var n=this.$tabs.index(this.$tabs.filter(function(n,i){return t(i).find(e).length>0})),i=e.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(i,n),e.css("visibility","hidden").addClass("js-dropdown-active").parent("li.is-dropdown-submenu-parent").addClass("is-active");var o=Foundation.Box.ImNotTouchingYou(e,null,!0);if(!o){var a="left"===this.options.alignment?"-right":"-left",s=e.parent(".is-dropdown-submenu-parent");s.removeClass("opens"+a).addClass("opens-"+this.options.alignment),o=Foundation.Box.ImNotTouchingYou(e,null,!0),o||s.removeClass("opens-"+this.options.alignment).addClass("opens-inner"),this.changed=!0}e.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownmenu",[e])}},{key:"_hide",value:function(t,e){var n;n=t&&t.length?t:void 0!==e?this.$tabs.not(function(t,n){return t===e}):this.$element;var i=n.hasClass("is-active")||n.find(".is-active").length>0;if(i){if(n.find("li.is-active").add(n).attr({"data-is-click":!1}).removeClass("is-active"),n.find("ul.js-dropdown-active").removeClass("js-dropdown-active"),this.changed||n.find("opens-inner").length){var o="left"===this.options.alignment?"right":"left";n.find("li.is-dropdown-submenu-parent").add(n).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+o),this.changed=!1}this.$element.trigger("hide.zf.dropdownmenu",[n])}}},{key:"destroy",value:function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),t(document.body).off(".zf.dropdownmenu"),Foundation.Nest.Burn(this.$element,"dropdown"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"left",closeOnClick:!0,closeOnClickInside:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0},Foundation.plugin(e,"DropdownMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=t(n),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveMenu")}return _createClass(e,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var e={},i=this.rules.split(" "),o=0;o<i.length;o++){var a=i[o].split("-"),s=a.length>1?a[0]:"small",r=a.length>1?a[1]:a[0];null!==n[r]&&(e[s]=n[r])}this.rules=e}t.isEmptyObject(this.rules)||this._checkMediaQueries(),this.$element.attr("data-mutate",this.$element.attr("data-mutate")||Foundation.GetYoDigits(6,"responsive-menu"))}},{key:"_events",value:function(){var e=this;t(window).on("changed.zf.mediaquery",function(){e._checkMediaQueries()})}},{key:"_checkMediaQueries",value:function(){var e,i=this;t.each(this.rules,function(t){Foundation.MediaQuery.atLeast(t)&&(e=t)}),e&&(this.currentPlugin instanceof this.rules[e].plugin||(t.each(n,function(t,e){i.$element.removeClass(e.cssClass)}),this.$element.addClass(this.rules[e].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[e].plugin(this.$element,{})))}},{key:"destroy",value:function(){this.currentPlugin.destroy(),t(window).off(".zf.ResponsiveMenu"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={};var n={dropdown:{cssClass:"dropdown",plugin:Foundation._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:Foundation._plugins.drilldown||null},accordion:{cssClass:"accordion-menu",plugin:Foundation._plugins["accordion-menu"]||null}};Foundation.plugin(e,"ResponsiveMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){function e(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)}function n(){return/Android/.test(window.navigator.userAgent)}function i(){return e()||n()}var o=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return _createClass(e,[{key:"_init",value:function(){this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isMobile=i(),this.$anchor=t(t('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":!0,tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(t(this.options.appendTo)),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&t(window).one("load.zf.reveal",this.open.bind(this))}},{key:"_makeOverlay",value:function(){return t("<div></div>").addClass("reveal-overlay").appendTo(this.options.appendTo)}},{key:"_updatePosition",value:function(){var e,n,i=this.$element.outerWidth(),o=t(window).width(),a=this.$element.outerHeight(),s=t(window).height();e="auto"===this.options.hOffset?parseInt((o-i)/2,10):parseInt(this.options.hOffset,10),n="auto"===this.options.vOffset?a>s?parseInt(Math.min(100,s/10),10):parseInt((s-a)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:n+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:e+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var e=this,n=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":function(i,o){if(i.target===n.$element[0]||t(i.target).parents("[data-closable]")[0]===o)return e.close.apply(e)},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){n._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(t){13!==t.which&&32!==t.which||(t.stopPropagation(),t.preventDefault(),n.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",function(e){e.target!==n.$element[0]&&!t.contains(n.$element[0],e.target)&&t.contains(document,e.target)&&n.close()}),this.options.deepLink&&t(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(t){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){function e(){o.isMobile?(o.originalScrollPos||(o.originalScrollPos=window.pageYOffset),t("html, body").addClass("is-reveal-open")):t("body").addClass("is-reveal-open")}var n=this;if(this.options.deepLink){var i="#"+this.id;window.history.pushState?window.history.pushState(null,null,i):window.location.hash=i}this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id);var o=this;this.options.animationIn?!function(){var t=function(){o.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),e(),Foundation.Keyboard.trapFocus(o.$element)};n.options.overlay&&Foundation.Motion.animateIn(n.$overlay,"fade-in"),Foundation.Motion.animateIn(n.$element,n.options.animationIn,function(){n.$element&&(n.focusableElements=Foundation.Keyboard.findFocusable(n.$element),t())})}():(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("open.zf.reveal"),e(),setTimeout(function(){n._extraHandlers()},0)}},{key:"_extraHandlers",value:function(){var e=this;this.$element&&(this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||t("body").on("click.zf.reveal",function(n){n.target!==e.$element[0]&&!t.contains(e.$element[0],n.target)&&t.contains(document,n.target)&&e.close()}),this.options.closeOnEsc&&t(window).on("keydown.zf.reveal",function(t){Foundation.Keyboard.handleKey(t,"Reveal",{close:function(){e.options.closeOnEsc&&(e.close(),e.$anchor.focus())}})}),this.$element.on("keydown.zf.reveal",function(n){var i=t(this);Foundation.Keyboard.handleKey(n,"Reveal",{open:function(){e.$element.find(":focus").is(e.$element.find("[data-close]"))?setTimeout(function(){e.$anchor.focus()},1):i.is(e.focusableElements)&&e.open()},close:function(){e.options.closeOnEsc&&(e.close(),e.$anchor.focus())},handled:function(t){t&&n.preventDefault()}})}))}},{key:"close",value:function(){function e(){n.isMobile?(t("html, body").removeClass("is-reveal-open"),n.originalScrollPos&&(t("body").scrollTop(n.originalScrollPos),n.originalScrollPos=null)):t("body").removeClass("is-reveal-open"),Foundation.Keyboard.releaseFocus(n.$element),n.$element.attr("aria-hidden",!0),n.$element.trigger("closed.zf.reveal")}if(!this.isActive||!this.$element.is(":visible"))return!1;var n=this;this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",e):e(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,e):e(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&t(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&t("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,n.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.href.replace("#"+this.id,"")):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo(t(this.options.appendTo)),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),t(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),e}();o.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1,appendTo:"body"},Foundation.plugin(o,"Reveal")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,
"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=t(n),this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveToggle")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.data("responsive-toggle");if(e||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=t("#"+e),this.$toggler=this.$element.find("[data-toggle]").filter(function(){var n=t(this).data("toggle");return n===e||""===n}),this.options=t.extend({},this.options,this.$targetMenu.data()),this.options.animate){var n=this.options.animate.split(" ");this.animationIn=n[0],this.animationOut=n[1]||null}this._update()}},{key:"_events",value:function(){this._updateMqHandler=this._update.bind(this),t(window).on("changed.zf.mediaquery",this._updateMqHandler),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){var t=this;Foundation.MediaQuery.atLeast(this.options.hideFor)||(this.options.animate?this.$targetMenu.is(":hidden")?Foundation.Motion.animateIn(this.$targetMenu,this.animationIn,function(){t.$element.trigger("toggled.zf.responsiveToggle"),t.$targetMenu.find("[data-mutate]").triggerHandler("mutateme.zf.trigger")}):Foundation.Motion.animateOut(this.$targetMenu,this.animationOut,function(){t.$element.trigger("toggled.zf.responsiveToggle")}):(this.$targetMenu.toggle(0),this.$targetMenu.find("[data-mutate]").trigger("mutateme.zf.trigger"),this.$element.trigger("toggled.zf.responsiveToggle")))}},{key:"destroy",value:function(){this.$element.off(".zf.responsiveToggle"),this.$toggler.off(".zf.responsiveToggle"),t(window).off("changed.zf.mediaquery",this._updateMqHandler),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={hideFor:"medium",animate:!1},Foundation.plugin(e,"ResponsiveToggle")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,n.data(),i),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return _createClass(e,[{key:"_init",value:function(){var e;this.options.animate?(e=this.options.animate.split(" "),this.animationIn=e[0],this.animationOut=e[1]||null):(e=this.$element.data("toggler"),this.className="."===e[0]?e.slice(1):e);var n=this.$element[0].id;t('[data-open="'+n+'"], [data-close="'+n+'"], [data-toggle="'+n+'"]').attr("aria-controls",n),this.$element.attr("aria-expanded",!this.$element.is(":hidden"))}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var t=this.$element.hasClass(this.className);t?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(t),this.$element.find("[data-mutate]").trigger("mutateme.zf.trigger")}},{key:"_toggleAnimate",value:function(){var t=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,function(){t._updateARIA(!0),this.trigger("on.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")}):Foundation.Motion.animateOut(this.$element,this.animationOut,function(){t._updateARIA(!1),this.trigger("off.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")})}},{key:"_updateARIA",value:function(t){this.$element.attr("aria-expanded",!!t)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={animate:!1},Foundation.plugin(e,"Toggler")}(jQuery);
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("whatInput",[],t):"object"==typeof exports?exports.whatInput=t():e.whatInput=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){e.exports=function(){var e=document.documentElement,t="initial",n=null,o=["input","select","textarea"],i=[16,17,18,91,93],r={keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"},u=[],d=!1,a={2:"touch",3:"touch",4:"mouse"},p=null,s=function(){window.PointerEvent?(e.addEventListener("pointerdown",c),e.addEventListener("pointermove",m)):window.MSPointerEvent?(e.addEventListener("MSPointerDown",c),e.addEventListener("MSPointerMove",m)):(e.addEventListener("mousedown",c),e.addEventListener("mousemove",m),"ontouchstart"in window&&e.addEventListener("touchstart",w)),e.addEventListener(l(),m),e.addEventListener("keydown",c),e.addEventListener("keyup",c)},c=function(e){if(!d){var u=e.which,a=r[e.type];if("pointer"===a&&(a=v(e)),t!==a||n!==a){var p=!(!document.activeElement||-1!==o.indexOf(document.activeElement.nodeName.toLowerCase()));("touch"===a||"mouse"===a&&-1===i.indexOf(u)||"keyboard"===a&&p)&&(t=n=a,f())}}},f=function(){e.setAttribute("data-whatinput",t),e.setAttribute("data-whatintent",t),-1===u.indexOf(t)&&(u.push(t),e.className+=" whatinput-types-"+t)},m=function(t){if(!d){var o=r[t.type];"pointer"===o&&(o=v(t)),n!==o&&(n=o,e.setAttribute("data-whatintent",n))}},w=function(e){window.clearTimeout(p),c(e),d=!0,p=window.setTimeout(function(){d=!1},200)},v=function(e){return"number"==typeof e.pointerType?a[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType},l=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"};return"addEventListener"in window&&Array.prototype.indexOf&&function(){r[l()]="mouse",s(),f()}(),{ask:function(e){return"loose"===e?n:t},types:function(){return u}}}()}])});
window.console=window.console||function(){return{log:function(t){}}}(),String.prototype.hasOwnProperty("trim")||(String.wsp=[],String.wsp[9]=!0,String.wsp[10]=!0,String.wsp[11]=!0,String.wsp[12]=!0,String.wsp[13]=!0,String.wsp[32]=!0,String.wsp[133]=!0,String.wsp[160]=!0,String.wsp[5760]=!0,String.wsp[6158]=!0,String.wsp[8192]=!0,String.wsp[8193]=!0,String.wsp[8194]=!0,String.wsp[8195]=!0,String.wsp[8196]=!0,String.wsp[8197]=!0,String.wsp[8198]=!0,String.wsp[8199]=!0,String.wsp[8200]=!0,String.wsp[8201]=!0,String.wsp[8202]=!0,String.wsp[8203]=!0,String.wsp[8232]=!0,String.wsp[8233]=!0,String.wsp[8239]=!0,String.wsp[8287]=!0,String.wsp[12288]=!0,String.prototype.trim=function(){var t=this+"",e=t.length;if(e){var n=String.wsp,r=0;for(--e;e>=0&&n[t.charCodeAt(e)];)--e;for(++e;r<e&&n[t.charCodeAt(r)];)++r;t=t.substring(r,e)}return t}),String.prototype.hasOwnProperty("trunc")||(String.prototype.trunc=function(t){var e=this+"";if(e.length<=t)return e.toString();var n=e.substring(0,t-1),r=n.lastIndexOf(" ");return(r>6&&n.length-r<20?n.substring(0,r):n)+"..."}),String.prototype.hasOwnProperty("startsWith")||(String.prototype.startsWith=function(t){return 0===(this+"").indexOf(t)}),String.prototype.hasOwnProperty("endsWith")||(String.prototype.endsWith=function(t){return(this+"").substring(this.length-t.length)===t}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unCamelCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},String.prototype.getExt=function(){var t=this+"",e=t.lastIndexOf(".");return e<=0||e>=t.length-1?"":t.substring(e+1).toLowerCase()},String.prototype.hasExt=function(t){var e=this+"",n=e.lastIndexOf(".");return n>=0&&(e=e.substring(n+1).toLowerCase(),(t+",").indexOf(e+",")>=0)},String.prototype.replaceExt=function(t){var e=this+"",n=e.lastIndexOf(".");return n<=0?e:e.substring(0,n+1)+t},String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")},String.prototype.getDir=function(){var t=(this+"").split("#")[0];return t.substring(0,t.lastIndexOf("/")+1)},String.prototype.getFile=function(){var t=(this+"").split("#")[0];return t.substring(t.lastIndexOf("/")+1)},String.prototype.getRelpath=function(t){var e=this+"",n=e.lastIndexOf("#");for(-1===n?n=e.length-1:n--;n>=0&&("/"!==e[n]||0!=t--);n--);return e.substring(n+1)},String.prototype.fixUrl=function(){for(var t,e,n=this+"";(t=n.indexOf("../"))>0;){if(1===t||-1===(e=n.lastIndexOf("/",t-2)))return n.substring(t+3);n=n.substring(0,e)+n.substring(t+2)}return n},String.prototype.fullUrl=function(){var t=this+"";return t.match(/^(http|ftp|file)/)||(t=window.location.href.getDir()+t),t.fixUrl()},String.prototype.cleanupHTML=function(){for(var t=[[/<(b|h)r\/?>/gi,"\n"],[/\&amp;/g,"&"],[/\&nbsp;/g," "],[/\&lt;/g,"<"],[/\&gt;/g,">"],[/\&(m|n)dash;/g,"-"],[/\&apos;/g,"'"],[/\&quot;/g,'"']],e=this+"",n=t.length-1;n>=0;n--)e=e.replace(t[n][0],t[n][1]);return e.replace},String.prototype.stripHTML=function(t){var e=this+"";return t&&(e=e.cleanupHTML()),e.replace(/<\/?[^>]+>/g,"")},String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")},String.prototype.appendSep=function(t,e){return(this.length?this+(e||" &middot; "):"")+t},String.prototype.rgb2hex=function(){var t=this+"";if("#"===t.charAt(0)||"transparent"===t)return t;var e,n=t.match(/\d+/g),r="";if(n){for(var o=0;o<n.length&&o<3;++o)r+=((e=parseInt(n[o],10).toString(16)).length<2?"0":"")+e;return"#"+r}return"transparent"},String.prototype.template=function(t){if(void 0===t||!this)return this;!isNaN(parseFloat(t))&&isFinite(t)&&(t+="");var e=this+"";if(t.constructor===Array)for(var n=0;n<t.length;++n)e=e.replace(new RegExp("\\{"+n+"\\}","gi"),t[n]);else e=e.replace(/\{0\}/gi,t);return e},String.prototype.getSearchTerms=function(){var t=this+"";if(-1===t.indexOf('"'))return t.split(" ");var e,n=[];do{if((e=t.indexOf('"'))>0&&n.push.apply(n,t.substring(0,e).split(" ")),t=t.substring(e+1),(e=t.indexOf('"'))<0){n.push(t);break}n.push(t.substring(0,e)),t=t.substring(e+1)}while(t.length);return n},String.prototype.objectify=function(){if(!this||!this.length)return this;var t=this+"";"?"!==t.charAt(0)&&"#"!==t.charAt(0)||(t=t.substring(1));for(var e,n={},r=t.split("&"),o=0,i=r.length;o<i;++o)(e=r[o].split("=")).length>1&&(n[e[0]]=decodeURIComponent(e[1]));return n},String.prototype.testIn=function(t){return"string"!=typeof t&&(t+=""),new RegExp(this,"i").test(t)},String.prototype.testExactMatch=function(t){if(t.constructor!==Array)return this==t+"";for(var e=0,n=t.length;e<n;++e)if(this==t[e])return!0;return!1},String.prototype.fixjAlbumPaths=function(t,e,n){var r=(this+"").replace(/\%24/g,"$");return t&&(r=r.replace(/\${resPath}/g,t)),e&&(r=r.replace(/\${rootPath}/g,e)),n&&(r=r.replace(/\${relPath}/g,n)),r},String.prototype.testMatch=function(t){if(typeof t===UNDEF)return!1;var e=this.toLowerCase();if(t.constructor!==Array)return e===(t+"").toLowerCase();for(var n=0,r=t.length;n<r;++n)if(e===t[n].toLowerCase())return!0;return!1},String.prototype.hashCode=function(){for(var t=0,e=0,n=this.length;e<n;++e)t=(t<<5)-t+this.charCodeAt(e),t&=t;return t},Math.minMax=function(t,e,n){return e=isNaN(e)?parseFloat(e):e,e<t?t:e>n?n:e};var encodeJ=[];encodeJ[33]="%21",encodeJ[35]="%23",encodeJ[36]="%24",encodeJ[38]="%26",encodeJ[39]="%27",encodeJ[40]="%28",encodeJ[41]="%29",encodeJ[43]="%2B",encodeJ[44]="%2C",encodeJ[59]="%3B",encodeJ[60]="%3C",encodeJ[61]="%3D",encodeJ[62]="%3E",encodeJ[63]="%3F",encodeJ[64]="%40",encodeJ[123]="%7B",encodeJ[124]="%7C",encodeJ[125]="%7D";var isEmpty=function(t){return null==t||0===Object.getOwnPropertyNames(t).length},paramize=function(t){if("number"==typeof t)return""+t;if("string"==typeof t)return t;if("object"==typeof t){for(var e="",n=Object.getOwnPropertyNames(t),r=n.length,o=0;o<r;o++)null!==t[n[o]]&&(e+="&"+n[o]+"="+encodeURIComponent(t[n[o]]));if(e.length)return e.substring(1)}return""},allTrue=function(t){if(t&&t.constructor===Array){for(var e=0;e<t.length;++e)if(!t[e])return!1;return!0}return!0===t},removeEmpty=function(t){if(t&&t.constructor===Array){var e,n=new Array;for(e=0;e<t.length;e++)"string"==typeof t[e]&&t[e].length&&n.push(t[e]);return n}return t},getCoords=function(t){return t.touches?1==t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:t.changedTouches&&1==t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:null:{x:t.clientX,y:t.clientY}},translate=function(t,e){if(t=t.trim(),"undefined"!=typeof Texts&&Texts.hasOwnProperty(t))return Texts[t];if(void 0!==e)return DEBUG&&console&&console.log("Using default translation: "+t+"="+e),e;DEBUG&&console&&console.log("Missing translation: "+t);var n=t.replace(/([A-Z])/g," $1").toLowerCase();return n[0]=n.charAt(0).toUpperCase(),n},getKeys=function(t,e){var n,r={},o=t.split(","),i=o.length;for(n=0;n<i;n++)r[o[n]]=translate(o[n],e[o]);return r},getTranslations=function(t){var e,n={};for(e in t)"object"==typeof t[e]?n[e]=getTranslations(t[e]):n[e]=translate(e,t[e]);return n},readData=function(t,e){var n={};if(t&&t.length&&e){e=e.split(",");for(var r,o=0;o<e.length;o++)null!=(r=t.data(e[o]))&&(n[e[o]]=r)}return n},getRelativeDate=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var e,n;return t>=730?(e=translate("yearsAgo"),n=Math.round(t/365)):t>=60?(e=translate("monthsAgo"),n=Math.round(t/30.5)):(e=translate("daysAgo"),n=t),e.replace("{0}",n)},getTimespan=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var e,n;return t>=730?(e=translate("inThePastNYears"),n=Math.round(t/365)):t>=60?(e=translate("inThePastNMonths"),n=Math.round(t/30.42)):(e=translate("inThePastNDays"),n=t),e.replace("{0}",n)},getRelativePath=function(t,e){if(!e.length)return"";if(!t.length)return e.endsWith("/")?e:e+"/";if(t===e)return"";for(var n=t.split("/"),r=e.split("/");n.length&&r.length&&n[0]===r[0];)n.shift(),r.shift();return"../../../../../../../../../../../../../../../../../../../../".substring(0,3*n.length)+(r.length?r.join("/")+"/":"")},encodeAsJava=function(t){var e="";for(t=/^(https?:|file:)?\/\//i.test(t)?encodeURI(t):encodeURIComponent(t),i=0;i<t.length;i++)e+=encodeJ[t.charCodeAt(i)]||t.charAt(i);return e},extend=function(){if(arguments.length<2)return arguments[0]||{};for(var t=arguments[0],e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t},passDefaults=function(t,e,n){if(t&&e)if(void 0!==n){n=n.split(",");for(var r=0;r<n.length;r++)t.hasOwnProperty(n[r])&&(e[n[r]]=t[n[r]])}else for(var o in t)e[o]=t[o]},readUserPrefs=function(t,e){if(void 0!==e&&t){e=e.split(",");for(var n,r=0;r<e.length;r++)null!==(n=$.cookie(e[r]))&&(t[e[r]]=n)}},addParam=function(t,e,n){if(HISTORY){var r=window.location.hash;r&&("#"===r.charAt(0)&&(r=r.substring(1)),e=extend(history.state||r.objectify(),e)),(r="#"+paramize(e))!==window.location.hash&&history.pushState(e,void 0===n?"":n,r.length>1?r:t||"index.html")}},setParam=function(t,e,n){if(HISTORY){var r="#"+paramize(e);r!==window.location.hash&&history.pushState(e,void 0===n?"":n,r.length>1?r:t||"index.html")}},removeParam=function(t,e,n){if(HISTORY){var r,o=window.location.hash;o&&(void 0===e?(o="",history.pushState("","",t||"index.html")):("#"===o.charAt(0)&&(o=o.substring(1)),(r=history.state||o.objectify()).hasOwnProperty(e)&&(delete r[e],o="#"+paramize(r)),history.pushState(r,void 0===n?"":n,o.length>1?o:t||"index.html")))}},removeSearch=function(t){HISTORY&&history.replaceState(history.state,void 0===t?"":t,window.location.href.replace(window.location.search,""))},readParam=function(){if(HISTORY){if(history.state)return history.state;var t=window.location.hash;return"#"===t.charAt(0)&&(t=t.substring(1)),t.objectify()}return null},printImage=function(t,e,n){if(t){var r=window.open("about:blank","print","location=no,status=no,titlebar=no");r.document.open(),r.document.write('<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>'+(e||"Print")+'</title>\n<script>printOut=function(){window.print();window.close();}<\/script>\n<style>body{margin:0;padding:0;text-align:center;overflow:hidden;}\nimg{display:block;width:100%;height:auto;vertical-align:top;}</style>\n</head>\n<body onLoad="setTimeout(printOut,100)"><img src="'+t+'">'+(n||"")+"</body>\n</html>"),r.document.close()}},xDecrypt=function(t){var e,n,r,o=[147,163,87,254,153,4,198,23],i=t.length,a=5*Math.ceil(i/8),s=new Array(a),u="",c=0;for(e=0;e<a;e++)s[e]=0;for(e=0;e<i;e++)(r=t.charCodeAt(e)-48)>9&&(r-=7),r<<=11-c%8,(n=Math.floor(c/8))<a&&(s[n]|=r>>8,++n<a&&(s[n]|=255&r)),c+=5;for(e=0;e<a;e++)s[e]^=o[e%8];for(a=s[0]|s[1]<<8,r=0,e=4;e<a;e++)u+=String.fromCharCode(s[e]),r+=s[e];return r!=(255&s[2]|s[3]<<8)&&(u=""),u},scrollbarWidth=function(){var t=document.createElement("div");t.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},isTouchEnabled=function(){return/Trident/.test(navigator.userAgent)?void 0!==navigator.maxTouchPoints&&navigator.maxTouchPoints:/Edge/.test(navigator.userAgent)?0==scrollbarWidth():/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent)||"ontouchstart"in window:"ontouchstart"in window},getTouch=function(){return/Trident|Edge/.test(navigator.userAgent)?window.navigator.pointerEnabled?{START:"pointerdown",MOVE:"pointermove",END:"pointerup",CANCEL:"pointercancel"}:{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerUp",CANCEL:"MSPointerCancel"}:{START:"touchstart",MOVE:"touchmove",END:"touchend",CANCEL:"touchcancel"}},hasLocalStorage=function(){try{return localStorage.setItem("_t","undefined"),localStorage.removeItem("_t"),!0}catch(t){return!1}},hasHistory=function(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},getVendor=function(){var t=navigator.userAgent;return t.indexOf("Trident")>0?"ms":t.indexOf("AppleWebKit")>0?"webkit":t.indexOf("Gecko")>0?"moz":t.indexOf("Presto")>0?"o":t.indexOf("Blink")>0?"webkit":""},UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),LOCALSTORAGE=hasLocalStorage(),HISTORY=hasHistory(),VEND=getVendor(),TOUCH=getTouch(),TOUCHENABLED=isTouchEnabled();addClass(document.getElementsByTagName("html")[0],(TOUCHENABLED?"":"no-")+"touch");var log=function(){},DEBUG=void 0!==DEBUG&&DEBUG;!function(t,e){"use strict";var n,r,o=!1,i=1;log=function(e){var a=function(e){if(t.isArray(e)){for(var n="",r=0;r<e.length;r++)n+=a(e[r])+", ";return"[ "+n.substring(0,n.length-2)+" ]"}if("object"==typeof e){n="";for(var r in e)n+=r+": "+a(e[r])+",<br>";return"{ "+n+" }"}return isNaN(e)?e:parseInt(e)===e?e:e.toFixed(4)};DEBUG&&!o&&(n||(n=t('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:0.75em;z-index:999999"></div>').hover(function(){o=!0},function(){o=!1}).appendTo("body")),e===r?n.children(":first").empty().html(r+" <sup>("+ ++i+")</sup>"):(t('<div style="height:3em;overflow:auto;">'+a(e)+"</div>").prependTo(n),r=e,i=1))},t.fn.logEvents=function(e){if(DEBUG){var n=e||"mousedown mouseup mouseover mouseout mousewheel wheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";return this.each(function(){t(this).on(n,function(t){return void 0===t?log("Undefined event"):t.target?"log"!==t.target.id&&log(t.type+' <span style="padding:0 4px;font-size:0.75em;background-color:#000;border-radius:4px;"><b>'+(t.target.nodeName?t.target.nodeName.toLowerCase():"???")+"</b>"+(t.target.id?":"+t.target.id:"")+"</span>"+(t.relatedTarget?' <span style="padding:0 4px;font-size:0.6em;background-color:#800;border-radius:4px;"><b>'+t.relatedTarget.nodeName.toLowerCase()+"</b>"+(t.relatedTarget.id?":"+t.relatedTarget.id:"")+"</span>":"")):log("No event target!"),!0})})}},t.fn.logCss=function(e,n,r){if(DEBUG){r=r||20,n=n||2e3;var o=new Date;return this.each(function(){var i=t(this),a=function(t){var e=new Date-o;log(e+"&nbsp;::&nbsp;"+t+" = "+i.css(t)),e>n&&clearInterval(s)},s=setInterval(function(){if(t.isArray(e))for(var n=0;n<e.length;n++)a(e[n]);else a(e)},r)})}},void 0===t.when.all&&(t.when.all=function(e){var n=new t.Deferred;return t.when.apply(t,e).then(function(){n.resolve(Array.prototype.slice.call(arguments))},function(){n.fail(Array.prototype.slice.call(arguments))}),n}),t.fn.waitAllImg=function(e,n,r){if(!this.length)return this;var o=t(this),i=[],a=function(e){var n=new t.Deferred,r=new Image;return r.onload=function(){n.resolve(e)},r.onerror=function(){n.reject(new Error("Image not found: "+e.src))},r.src=e.src,n};return function(e){return e.filter('img[src][src!=""]').each(function(){i.push(a(this))}),t.when.all(i)}(o).then(function(e){t.isFunction(n)&&n.call(e)},function(e){t.isFunction(r)&&r.call(e)}).then(function(){t.isFunction(e)&&e.call(o)}),this};var a=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},s=function(t){a()||(t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&document.body.msRequestFullscreen())},u=function(){a()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())};t.fn.fullScreen=function(t){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&(void 0===t?a():void(t?s(this[0]):u()))}}(jQuery);
var J={FOLDERS:"folders",NAME:"name",PATH:"path",THUMB:"thumb",IMAGE:"image",WIDTH:"width",HEIGHT:"height",ORIGINAL:"original",FOLDERS:"folders",OBJECTS:"objects",FILEDATE:"fileDate",COMMENT:"comment",TITLE:"title",COUNTERS:"counters",DEEPCOUNTERS:"deepCounters",FILESIZE:"fileSize",CATEGORY:"category",KEYWORDS:"keywords",CAMERA:"camera",VIDEO:"video",LEVEL:"level",PATHREF:"pathRef",PARENTREF:"parentRef",RELPATH:"relPath",IMAGECAPTION:"imageCaption",THUMBCAPTION:"thumbCaption",PHOTODATA:"photodata",LOCATION:"location",REGIONS:"regions",SHOP:"shop",EXTERNAL:"external",MODIFIEDDAYS:"modifiedDays",EPOCHDATE:"epochDate",EPOCHDATERANGE:"epochDateRange",MOSTPHOTOS:"mostphotos",OBJ:"obj"},Album=function(e,t){var n,r,a,l,u,f={treeFile:"tree.json",dataFile:"data1.json",indexName:"index.html",slidesDir:"slides",rootPath:"",audioPoster:"audio.png",videoPoster:"video.png",relPath:"",lazy:!0},s=getTranslations({and:"and"}),c={},h=[],E=function(){return u},O=function(){return c},g=function(){return h},p=function(e){if("video"===e[J.CATEGORY]){var t=e[J.VIDEO][J.PATH];return decodeURIComponent(t.substring(t.lastIndexOf("/")+1))}return e.hasOwnProperty(J.ORIGINAL)?decodeURIComponent(e[J.ORIGINAL][J.PATH]):e[J.NAME]},P=function(e){return e.hasOwnProperty(J.CATEGORY)&&"image"===e[J.CATEGORY]},T=function(e){return e.hasOwnProperty(J.CATEGORY)&&"audio"===e[J.CATEGORY]},A=function(e){return e.hasOwnProperty(J.CATEGORY)&&"video"===e[J.CATEGORY]},y=function(e){return e.hasOwnProperty(J.LEVEL)},R=function(e){return e.hasOwnProperty(J.CATEGORY)&&-1!=="image.video.audio.other".indexOf(e[J.CATEGORY])},D=function(t){"/"===t.slice(-1)&&"../"!==t.slice(-3)&&(t=t.substring(0,t.length-1));var n=e.inArray(t,h);return n>=0?n:h.push(t)-1},F=function(e){return h[e]},v=function(e){var t=F(e[J.RELPATH]),n=e[J.CATEGORY]||"folder";return t=t.length&&"/"!==t.slice(-1)?t+"/":t,"folder"===n?t:"video"===n?t+e[J.VIDEO][J.PATH]:"audio"===n||"other"===n||e.hasOwnProperty(J.ORIGINAL)?t+e[J.ORIGINAL][J.PATH]:"image"===n?t+e[J.IMAGE][J.PATH]:"webPage"===n?t+e[J.NAME]:e[J.PATH]},S=function(t){return t?!e.isNumeric(t)||t<0||t>h.length?(console.log("Error: out of bounds path reference ("+t+")!"),null):L(h[t]):c},w=function(e){return e?("/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),L(e)):c},L=function(e){var t,n,r,o,i=c,a=e.split("/");for(t=0,r=a.length;t<r;t++){if(!i.hasOwnProperty(J.FOLDERS))return null;for(n=0,o=i[J.FOLDERS].length;n<o;n++)if(i[J.FOLDERS][n][J.PATH]===a[t]){i=i[J.FOLDERS][n];break}if(n===o)return null}return t===r?i:null},I=function(e){if(typeof e===UNDEF&&(e=r),e===c)return null;var t;return t=S(e.hasOwnProperty(J.PARENTREF)?e[J.PARENTREF]:e[J.PATHREF]),t===e?null:t},m=function(e,t){do{if(e.hasOwnProperty(t))return e[t]}while(e=I(e));return null},C=function(t,n){var r={};do{t.hasOwnProperty(n)&&(r=e.extend({},r,t[n]))}while(t=I(t));return r},H=function(){var e=function(t,n,o){t[J.LEVEL]=n,o=o.length&&"/"!==o.slice(-1)?o+"/":o;var i=n?t[J.PATH]:"";t[J.PATHREF]=D(o+i),t[J.PARENTREF]=n?D(o):null;var a;if(a=f.relPath.length?t===r?"":0===i.indexOf(f.relPath)?i.substring(f.relPath.length):f.rootPath+"/"+(o+i):o+i,t[J.RELPATH]=D(a),t.hasOwnProperty(J.FOLDERS)){pr=D(o);for(var l=0,u=t[J.FOLDERS].length;l<u;l++)e(t[J.FOLDERS][l],n+1,o+i)}};e(c,0,"")},N=function(t){return e.getJSON((f.rootPath?f.rootPath+"/":"")+f.treeFile).done(function(n){c=n,null===(r=w(f.relPath))&&(console.log("Error: can't find folder \""+f.relPath+'" in the database! Reverting to root folder.'),r=""),H(),e.isFunction(t)&&t.call(this)}).fail(function(){console.log('Error loading "'+f.treeFile+"\". Please note, JSON support is required for PhotoBlogger, but it's blocked in Chrome and IE when viewing local albums. The uploaded album will work fine, however.\nIf this error appears on a http:// page that means you need to allow JSON files on your MS IIS/Azure server."),e.isFunction(t)&&t.call(this)})},x=function(t,n){if(t){if(t.hasOwnProperty(J.OBJECTS))return e.isFunction(n)&&n.call(this,t),!0;var r=F(t[J.RELPATH]);l||(l=[]),l.push(e.getJSON((r?r+"/":"")+f.dataFile).done(function(r){for(var o in r)o===J.OBJECTS||t.hasOwnProperty(o)||(t[o]=r[o]);if(r.hasOwnProperty(J.OBJECTS)){t[J.OBJECTS]=[];for(var i,a=0,l=r[J.OBJECTS].length;a<l;a++)"folder"!==(i=r[J.OBJECTS][a])[J.CATEGORY]&&(i[J.PATHREF]=t[J.PATHREF],i[J.RELPATH]=t[J.RELPATH],t[J.OBJECTS].push(i))}e.isFunction(n)&&n.call(this,t)}).fail(function(){console.log('Error loading folder data: "'+(r?r+"/":"")+f.dataFile+'".'),e.isFunction(n)&&n.call(this,t)}))}},M=function(e,t){if(x(e),t&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)M(e[J.FOLDERS][n])},G=function(){return new Date(c[J.FILEDATE])},B=function(){return c[J.TITLE]||c[J.NAME]},b=function(){return r},Y=function(){return r.hasOwnProperty(J.OBJECTS)?r[J.OBJECTS]:[]},U=function(){var e=[];if(r&&r.hasOwnProperty(J.OBJECTS)){var t=r[J.OBJECTS];if(t)for(var n=0,o=t.length;n<o;n++)R(t[n])&&e.push(t[n])}return e},V=function(){return r&&r.hasOwnProperty(J.FOLDERS)?r[J.FOLDERS]:[]},k=function(e){typeof e===UNDEF&&(e=r);var t=I(e);if(t){var n=t[J.FOLDERS].findIndex(function(e){return e===o});if(n<t[J.FOLDERS].length)return t[J.FOLDERS][n+1]}return null},j=function(e){typeof e===UNDEF&&(e=r);var t=I(e);if(t){var n=t[J.FOLDERS].findIndex(function(e){return e===o});if(n>0)return t[J.FOLDERS][n-1]}return null},z=function(t){var n,r=k(),o=function(e){if(e.hasOwnProperty(J.OBJECTS))for(var t=e[J.OBJECTS],r=0,o=t.length;r<o;r++)if(R(t[r]))return void(n=t[r])};return r&&(l=[],x(r,o),e.isFunction(t)&&(l.length?e.when.apply(e,l).done(function(){t.call(n)}):t.call(n))),null},K=function(t){var n,r=j(),o=function(e){if(e.hasOwnProperty(J.OBJECTS))for(var t=e[J.OBJECTS],r=t.length-1;r>=0;r--)if(R(t[r]))return void(n=t[r])};return r&&(l=[],x(r,o),e.isFunction(t)&&(l.length?e.when.apply(e,l).done(function(){t.call(n)}):t.call(n))),null},W=function(e){return F(e[J.PATHREF]||0)},q=function(e){return F(e[J.RELPATH]||0)},X=function(e){var t=F((e=e||r)[J.RELPATH]);return t=(t.length?t+"/":"")+f.indexName,R(e[i])&&(t+="#img="+encodeAsJave(e[J.NAME])),t},Z=function(e){var t=F(e[J.RELPATH]),n=e[J.THUMB][J.PATH];return y(e)&&(n=n.replace(e[J.PATH]+"/","")),(t.length?t+"/":"")+n},Q=function(e){var t=F(e[J.RELPATH]);return(t=t.length?t+"/":"")+e[J.IMAGE][J.PATH]},$=function(e){var t=F(e[J.RELPATH]),n=e[J.CATEGORY]||"folder";return t=t.length?t+"/":"","audio"!==n&&"video"!==n||e[J.IMAGE][J.PATH].startsWith(f.slidesDir+"/")?t+e[J.IMAGE][J.PATH]:(f.rootPath.length?f.rootPath+"/":"")+"res/"+f[n+"Poster"]},_=function(e){var t=F(e[J.RELPATH]);return(t.length?t+"/":"")+(e.hasOwnProperty(J.ORIGINAL)?e[J.ORIGINAL][J.PATH]:e[J.IMAGE][J.PATH])},ee=function(e){var t=F(e[J.RELPATH]);return(t.length?t.fullUrl():window.location.href.getDir())+(window.location.href.getFile()||f.indexName)+"#img="+p(e)},te=function(e){var t=F(e[J.RELPATH]);return(t.length?t.fullUrl():window.location.href.getDir())+e[J.IMAGE][J.PATH]},ne=function(e){return 0===e[J.RELPATH]},re=function(e){return typeof e===UNDEF&&(e=r),e===c?0:e.hasOwnProperty(J.LEVEL)?e[J.LEVEL]:re(I(e))},oe=function(e){return typeof e===UNDEF&&(e=r),e[J.TITLE]||""},ie=function(e){return typeof e===UNDEF&&(e=r),e[J.NAME]||""},ae=function(e){return typeof e===UNDEF&&(e=r),e[J.COMMENT]||""},le=function(e,t,n){return n?m(e,t):e.hasOwnProperty(t)?e[t]:null},ue=function(e,t,n){return n?C(e,t):e.hasOwnProperty(t)?e[t]:null},fe=function(e){var t=C(e||c,J.SHOP);return t&&"-"!==t.options},se=function(e){return c.hasOwnProperty(e)?c[e]:null},ce=function(t){if(typeof t!==UNDEF&&t.hasOwnProperty("range")){var n,o,i=[],a=function(e){if(e&&e.hasOwnProperty(J.OBJECTS))for(var t,r=e[J.OBJECTS],a=0;a<r.length;a++)if(t=r[a],R(t)){if(t.hasOwnProperty(J.MODIFIEDDAYS))d=t[J.MODIFIEDDAYS];else{if(!t.hasOwnProperty(J.EPOCHDATE))continue;d=t[J.EPOCHDATE]/864e5}d>=n&&d<=o&&i.push(t)}},u=function(){i.sort(function(e,t){return t.hasOwnProperty(J.MODIFIEDDAYS)?t[J.MODIFIEDDAYS]-e[J.MODIFIEDDAYS]:t[J.EPOCHDATE]-e[J.EPOCHDATE]})},f=function(e){if(x(e,a),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)f(e[J.FOLDERS][n])};(t=e.extend({sort:!0,depth:"current"},t)).end?(o=t.end,n=o-t.range):(n=Math.ceil(new Date/864e5),n-=t.hasOwnProperty("start")?t.start:t.range,o=n+t.range),f("tree"===t.depth?c:r),e.isFunction(t.ready)&&(l.length?e.when.apply(e,l).done(function(){t.sort&&u(),t.ready.call(i,t)}):(t.sort&&u(),t.ready.call(i,t)))}},he=function(t){if(typeof t!==UNDEF&&t.hasOwnProperty("terms")){var n,o,i=[],a=(t=e.extend({fields:"creator,keywords,title,comment,name",types:"all",depth:"current",exact:!1},t)).fields.split(/,\s?/),u=a.length,h=new Array(u),E=!1,O="all"===t.types,d={},g=function(t,r){var l=E?new Array(o):null;matchKey=function(e,t,r){if("string"==typeof t)for(var a=0;a<o;a++)if(r&&n[a].testMatch(t)||!r&&n[a].testIn(t)){if(!E)return void i.push(e);l[a]=!0}};for(var f,s,c=0;c<u;c++){if(a[c].length>1){if(a[c][0]!==r)continue;s=a[c][1]}else s=a[c][0];if(t.hasOwnProperty(s))if(e.isArray(t[s]))for(f=0;f<t[s].length;f++)matchKey(t,t[s][f],h[s]);else matchKey(t,t[s],h[s])}E&&allTrue(l)&&i.push(t)},p=function(e){if(e&&((O||d.folder)&&g(e,"folder"),e.hasOwnProperty(J.OBJECTS)))for(var t=0,n=e[J.OBJECTS];t<n.length;t++)cat=n[t][J.CATEGORY],(O||d[cat])&&g(n[t],cat)},P=function(e){if(x(e,p),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)P(e[J.FOLDERS][n])};'"'===t.terms[0]&&'"'===t.terms[t.terms.length-1]?(n=t.terms.substring(1,t.terms.length-1),!1===t.exact&&(t.exact=!0)):!1===t.exact?~(n=t.terms.replace(/\s+/g,",")).indexOf(","+s.and+",")&&(n=n.replace(new RegExp(","+s.and+",","gi"),","),E=!0):n=t.terms.trim(),n=t.exact?[n]:removeEmpty(n.split(/,\s?/)),o=n.length;for(var T,A=0;A<u;A++)a[A]=a[A].split(":"),T=a[A][1]||a[A][0],h[T]="string"==typeof t.exact?t.exact.indexOf(T)>=0:t.exact;if(!O)for(var A=0,y=f.types.split(/,\s?/);A<y.length;A++)d[y[A]]=!0;l=[],P("tree"===t.depth?c:r),e.isFunction(t.ready)&&(l.length?e.when.apply(e,l).done(function(){t.ready.call(i,t)}):t.ready.call(i,t))}},Ee=function(t){var t=e.extend({fields:"creator,keywords,folder:title,webLocation:title",types:"all",depth:"current",exact:"creator,keywords,name"},t),n=[],o=e.isArray(t.fields)?t.fields:t.fields.split(/,\s?/),i=o.length,a="name"===t.sort,u="all"===t.types,s={},h={},E=function(e,t){if(e){var r,o;h[t]?o=[e.toString()]:("comment"===t&&(e=e.stripHTML()),o=e.split(/[\s,\.\!\?\(\)]+/),o=removeEmpty(o));for(var i=0,a=o.length;i<a;i++)if(!((r=o[i]).length<=2)){for(var l=0,u=n.length;l<u&&n[l][0]!==r;l++);l===u?n.push([r,1]):n[l][1]++}}},O=function(t,n){for(var r,a=0,l="";a<i;a++){if(o[a].length>1){if(o[a][0]!==n)continue;r=o[a][1]}else r=o[a][0];if(t.hasOwnProperty(r)&&t[r])if(e.isArray(t[r]))for(var u=0;u<t[r].length;u++)l&&-1!==l.indexOf(t[r][u]+"@")||(E(t[r][u],r),l+=t[r][u]+"@");else l&&-1!==l.indexOf(t[r]+"@")||(E(t[r],r),l+=t[r]+"@")}},d=function(e){if(e&&((u||s.folder)&&O(e,"folder"),e.hasOwnProperty(J.OBJECTS)))for(var t,n=0,r=e[J.OBJECTS];n<r.length;n++)t=r[n][J.CATEGORY],(u||s[t])&&O(r[n],t)},g=function(e){if(x(e,d),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)g(e[J.FOLDERS][n])},p=function(){n.sort(function(e,t){return a?(""+e[0]).localeCompare(""+t[0]):t[1]-e[1]})};l=[];for(var P,T=0;T<i;T++)o[T]=o[T].split(":"),P=o[T][1]||o[T][0],h[P]="string"==typeof t.exact?t.exact.indexOf(P)>=0:t.exact;if(!u)for(var T=0,A=f.types.split(/,\s?/);T<A.length;T++)s[A[T]]=!0;g("tree"===t.depth?c:r),e.isFunction(t.ready)&&(l.length?e.when.apply(e,l).done(function(){t.sort&&p(),t.ready.call(n,t)}):(t.sort&&p(),t.ready.call(n,t)))};return t&&function(t){n||(n=new Date,typeof t!==UNDEF&&e.extend(f,t),u=!1,"."===f.rootPath&&(f.rootPath=""),N(function(){l=[],M(f.lazy?r:c,!f.lazy),e.when.apply(e,l).done(function(){var t=new Date;console.log(l.length+" folder(s) loaded: "+(t-n)+"ms"),u=!0,l=null,a=r&&r.hasOwnProperty(J.OBJECTS)?0:null,e.isFunction(f.ready)&&f.ready.call(this)})}))}(t),{isReady:E,collectTags:Ee,collectItems:he,collectByDate:ce,getTree:O,getPaths:g,isImage:P,isAudio:T,isVideo:A,isLightboxable:R,isCurrentFolder:ne,getLevel:re,getTitle:oe,getName:ie,getComment:ae,getMakeDate:G,getAlbumTitle:B,getCurrentFolder:b,getObjects:Y,getImages:U,getFolders:V,getFolderPath:W,getRelativeFolderPath:q,getParent:I,getItemName:p,getItemPath:v,getUrl:X,getThumbPath:Z,getImagePath:Q,getPosterPath:$,getSourcePath:_,getAbsolutePath:ee,getAbsoluteImagePath:te,getPreviousFoldersLastImage:K,getNextFoldersFirstImage:z,getProperty:le,getPropertyObject:ue,hasShop:fe,getRootProperty:se}};
!function(e){"use strict";var t=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(e){return!1}}();e.cookie=function(e,r,n){var o=function(e){return!!/^(true|yes)$/.test(e)||!/^(false|no)$/.test(e)&&(/^([\d.]+)$/.test(e)?parseFloat(e):e)},i=function(e){if("string"!=typeof e)return e;if("["===e[0]||"{"===e[0]){e=JSON.parse(e);for(var t in e)"string"==typeof t[e]&&(t[e]=o(t[e]));return e}return o(e)};if(arguments.length>1){var a=new Date;return null===r?t?localStorage.removeItem(e):document.cookie=encodeURIComponent(e)+"=; expires="+a.toGMTString()+"; path=/":(r="object"==typeof r?JSON.stringify(r):String(r),a.setTime(a.getTime()+1e3*("number"!=typeof n?3600:n)),t?localStorage.setItem(e,r+"; @"+String(a.getTime())):document.cookie=encodeURIComponent(e)+"="+r+"; expires="+a.toGMTString()+"; path=/"),r}if(e)if(t){if(l=localStorage.getItem(e)){if(1===(l=l.split("; @")).length&&(l=l[0].split("; ")),!(l.length>1))return i(l);if((a=new Date).getTime()<parseInt(l[1],10))return i(l[0]);localStorage.removeItem(e)}}else{var l,s=document.cookie.split(/;\s*/);e+="=";for(var u=0;u<s.length;u++)if(s[u].substring(0,e.length)===e)return i(s[u].substring(e.length))}return null}}(jQuery);
!function(o){"use strict";o.fn.scrollToTopBtn=function(){var l=getTranslations({scrollTopTooltip:"Top"}),t=o("<a>",{class:"large button icon-arrow-up",id:"scrollup",role:"button"}).appendTo(o(this).eq(0));return l.scrollTopTooltip&&t.addTooltip(l.scrollTopTooltip,{touchToggle:!1,pos:[2,1,0,1]}),o(window).on("scroll",function(){return o(window).scrollTop()>0?t.is(":hidden")&&t.fadeIn(500):t.fadeOut(500),!0}),t.on("click",function(){return o("body, html").animate({scrollTop:0},500),t.trigger("removeTooltip"),!1}),this}}(jQuery);
!function(e){"use strict";e.fn.renderShares=function(t){t=e.extend({},e.fn.renderShares.defaults,t);var a=e(this),n=getTranslations({share:"Share",shareOn:"Share on",checkOutThis:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}),i=encodeURIComponent(t.callAction||n.checkOutThis),r=(t.label||n.share,function(n,r){if((r=typeof r!==UNDEF?e.extend({},t,r):t).hasOwnProperty("href")||(r.href=window.location.href),r.hasOwnProperty("description")?r.description=r.description.stripHTML():r.description=e("meta[name=description]").attr("content")||"",r.hasOwnProperty("title")?r.title=r.title.stripHTML():r.title=e("meta[name=title]").attr("content")||e("title").text()||"",!r.hasOwnProperty("image")){var o=e("link[rel=image_src]");r.image=o.length?o.attr("href"):window.location.href.getDir()+"folderthumb.jpg"}r.image.startsWith("http")||(r.image=window.location.href.getDir()+r.image);var s,l=encodeURIComponent(r.href),c=encodeURIComponent(r.title),d=encodeURIComponent(r.description),p=encodeURIComponent(r.image);a.find("."+t.className+" a").each(function(){var t=e(this);switch(t.data("share")){case"facebook":if(typeof FB!==UNDEF)return void t.off(".share").on("click.share",function(){return FB.ui({method:"feed",link:r.href,caption:r.title,description:r.description,picture:r.image}),!1});s="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D="+r.href+"&p%5Bimages%5D%5B0%5D="+r.image+"&p%5Btitle%5D="+c;break;case"twitter":s="http://twitter.com/home?status="+c+": "+l;break;case"googlePlus":s="https://plus.google.com/share?url="+l;break;case"tumblr":s="http://www.tumblr.com/share/link?url="+l+"&name="+c;break;case"pinterest":s="http://pinterest.com/pin/create/button/?url="+l+"&media="+p+"&description="+c;break;case"linkedin":s="https://www.linkedin.com/shareArticle?mini=true&url="+l+"&title="+c+"&summary="+d;break;case"digg":s="http://digg.com/submit?url="+r.href;break;case"stumbleupon":s="http://www.stumbleupon.com/submit?url="+r.href+"&title="+c;break;case"reddit":s="http://www.reddit.com/submit?url="+r.href;break;case"email":t.attr({href:"mailto:?subject="+i+"&body="+c+"%0D%0A"+d+"%0D%0A"+r.href.replace(/%/g,"%25")});default:return}t.attr({href:s,target:"_blank"})})});return function(i){for(var o,i=e("<div>",{class:t.className}).appendTo(a),s=t.sites.split(","),l=0;l<s.length;l++)o=s[l],"facebook,twitter,googlePlus,tumblr,pinterest,linkedin,digg,stumbleupon,reddit,email".indexOf(o)>=0&&i.append(e("<a>",{class:"button icon-"+o.unCamelCase(),title:n.shareOn+" "+o.capitalize(),text:" "+(t.buttonLabels?o.capitalize():"")}).data("share",o));r(),i.children("a").addTooltip()}(),t.hasOwnProperty("buttons")&&!LOCAL&&function(n){for(var i=t.buttons.split(","),r=encodeURIComponent(window.location.href.split("#")[0]),o=encodeURIComponent(t.title||e("meta[name=title]").attr("content")||e("title").text()),s=t.image?window.location.href.getDir()+encodeURIComponent(t.image):e("link[rel=image_src]").attr("href"),n=e("<div>",{class:t.buttonsClassName}).appendTo(a),l=0;l<i.length;l++)switch(i[l]){case"facebook":n.append('<div class="likebtn fb-like" data-href="'+r+'" data-layout="button_count" data-action="like" data-size="large" data-show-faces="false" data-share="false"></div>');break;case"twitter":n.append('<a class="likebtn twitter-share-button icon-twitter" href="https://twitter.com/intent/tweet?text='+o+"&url="+r+'" data-size="large" target="_blank"> Tweet</a>');break;case"google":var c=e('<div class="likebtn"></div>').appendTo(n),d=20,p=function(){"undefined"==typeof gapi?d--?setTimeout(p,200):"console"in window&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi.plusone.render(c[0],{size:"standard",annotation:"bubble"})},200)};c=e('<span class="g-plusone" data-href="'+r+'"></span>').appendTo(c),p();break;case"pinterest":n.append('<div class="likebtn"><a data-pin-do="buttonPin" data-pin-count="beside" data-pin-tall="true" data-pin-save="true" href="https://www.pinterest.com/pin/create/button/?url='+r+"&media="+s+"&description="+o+'" data-pin-do="buttonPin"></a></div>')}}(),a.on("updateLinks",r),this},e.fn.renderShares.defaults={buttonLabels:!0,className:"shares",buttonsClassName:"buttons",sites:"facebook,twitter,googlePlus,tumblr"}}(jQuery);
!function(t,o,i,n){"use strict";var e,s,a=function(){var t=(i.body||i.documentElement).style;if(void 0!==t.webkitTransition)e="-webkit-",s="webkitTransitionEnd";else if(void 0!==t.MozTransition)e="-moz-",s="transitionend";else if(void 0!==t.OTransition)e="-o-",s="oTransitionEnd";else{if(void 0===t.transition)return!1;e="",s="transitionend"}return!0}(),r={left:0,top:0,center:.5,middle:.5,right:1,bottom:1};t.fn.translateX=function(o,i,n){var r={};if(typeof o===UNDEF){var f=t(this).eq(0);return a?f.position().left-parseFloat(f.css("left")):f.position().left-f.data("leftPos")||0}return a&&(r[e+"transform"]="translateX("+o+"px)",r[e+"transition"]=e+"transform"+(i?" "+i+"ms ease-out":"")),this.each(function(){var e=t(this);if(a)"function"==typeof n&&e.one(s,n),e.css(r);else{var f=e.data("leftPos");void 0===f&&e.data("leftPos",f=e.position().left),r.left=f+o,i?e.animate(r,i,n):("function"==typeof n&&setTimeout(function(){n.call(e[0])},50),e.css(r))}})},t.fn.translate=function(o,i,n){var r={};if(typeof o===UNDEF){var f=t(this).eq(0);return a?[f.position().left-parseFloat(f.css("left")),f.position().top-parseFloat(f.css("top"))]:[f.position().left-f.data("leftPos")||0,f.position().top-f.data("topPos")||0]}return a&&(r[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",r[e+"transition"]=e+"transform"+(i?" "+i+"ms ease-out":"")),this.each(function(){var e=t(this);if(a)"function"==typeof n&&e.one(s,n),e.css(r);else{var f=e.data("leftPos");top=e.data("topPos"),void 0===f&&e.data("leftPos",f=e.position().left),void 0===top&&e.data("topPos",top=e.position().top),r.left=f+o[0],r.top=top+o[1],i?e.animate(r,i,n):("function"==typeof n&&setTimeout(function(){n.call(e[0])},50),e.css(r))}})},t.fn.translateXAndFade=function(o,i,n,r){var f={opacity:i};return a&&(f[e+"transform"]="translateX("+o+"px)",f[e+"transition-property"]=e+"transform, opacity",f[e+"transition-duration"]=n+"ms",f[e+"transition-timing-function"]="ease-out"),this.each(function(){var i=t(this);if(a)"function"==typeof r&&i.one(s,r),i.css(f);else{var e=i.data("leftPos");void 0===e&&i.data("leftPos",e=i.position().left),f.left=e+o,n?i.animate(f,n,r):(i.css(f),"function"==typeof r&&setTimeout(function(){r.call(i[0])},50))}})},t.fn.translateAndFade=function(o,i,n,r){var f={opacity:i};return a&&(f[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",f[e+"transition-property"]=e+"transform, opacity",f[e+"transition-duration"]=n+"ms",f[e+"transition-timing-function"]="ease-out"),this.each(function(){var i=t(this);if(a)"function"==typeof r&&i.one(s,r),i.css(f);else{var e=i.data("leftPos"),c=i.data("topPos");void 0===e&&i.data("leftPos",e=i.position().left),void 0===c&&i.data("topPos",c=i.position().top),f.left=e+o[0],f.top=c+o[1],n?i.animate(f,n,r):(i.css(f),"function"==typeof r&&setTimeout(function(){r.call(i[0])},50))}})},t.fn.opacity=function(o,i,n,r,f){var c=t(this);if(void 0===o||"boolean"==typeof o)return c.css("opacity");var p=!1,l={},u=function(){p||(p=!0,t.isFunction(f)&&f.call(c[0]))};return t.isFunction(i)?(f=i,n="ease-out",i=void 0):t.isFunction(n)?(f=n,n="ease-out"):t.isFunction(r)&&(f=r,r=!1),"boolean"==typeof n&&(r=n,n="ease-out"),"boolean"==typeof i&&(r=i,i=void 0),c.css("opacity")===o?(t.isFunction(f)&&setTimeout(function(){f.call(c[0])},50),this):(l.opacity=o,a&&!r?i?(l[e+"transition"]="opacity "+i+"ms "+n,c.one(s,u),setTimeout(u,i+50),c.css(l)):(l[e+"transition"]="none",c.css(l),t.isFunction(f)&&setTimeout(function(){f.call(c[0])},50)):i?c.animate(l,i,u):(c.css(l),t.isFunction(f)&&setTimeout(function(){f.call(c[0])},50)),this)},t.fn.transform=function(o,i,n,f,c){var p=t(this).eq(0),l=p.data("transform")||{origo:[0,0],position:[0,0],origin:[.5,.5],baseSize:[p.width(),p.height()],baseScale:[1,1],scale:[1,1],rotate:0};if("object"!=typeof o)return l;arguments.length>1?("function"==typeof i?(c=i,n="ease-out",i=void 0):"function"==typeof n?(c=n,n="ease-out"):"function"==typeof f&&(c=f,f=!1),"boolean"==typeof n&&(f=n,n="ease-out"),"boolean"==typeof i&&(f=i,i=void 0)):n="ease-out";var u,d=!1,m={},y=function(){setTimeout(function(){d||(d=!0,"function"==typeof c&&c.call(p[0]))},20)};if(void 0!==o.opacity&&(m.opacity=o.opacity),o.origo){if(!a||f){var g=p.data("originalPosition");g||(g=[p.position().left,p.position().top],p.data("originalPosition",g)),o.origo[0]+=g[0],o.origo[1]+=g[1]}}else o.origo=l.origo;return o.baseScale?"number"==typeof o.baseScale&&(o.baseScale=[o.baseScale,o.baseScale]):o.baseScale=l.baseScale,o.baseSize?o.scale||o.size||(o.scale=[1,1]):o.baseSize=l.baseSize,o.position?(void 0===o.position[0]&&(o.position[0]=l.position[0]),void 0===o.position[1]&&(o.position[1]=l.position[1])):o.position=l.position,o.origin?("string"==typeof o.origin[0]&&(o.origin[0]=r[o.origin[0]]),"string"==typeof o.origin[1]&&(o.origin[1]=r[o.origin[1]])):o.origin=l.origin,o.scale?"number"==typeof o.scale&&(o.scale=[o.scale,o.scale]):o.size?o.scale=[o.size[0]/o.baseSize[0],o.size[1]/o.baseSize[1]]:o.scale=l.scale,u=[o.scale[0]*o.baseScale[0],o.scale[1]*o.baseScale[1]],p.data("transform",o),a&&!f?(o.origin[0]===l.origin[0]&&o.origin[1]===l.origin[1]||(m[e+"transform-origin"]=100*o.origin[0]+"% "+100*o.origin[1]+"%"),m[e+"transform"]="translate("+(o.origo[0]+o.position[0])+"px,"+(o.origo[1]+o.position[1])+"px)"+(1===u[0]&&1===u[1]?"":" scale("+u[0]+","+u[1]+")")+(o.rotate?" rotate("+o.rotate+"deg)":""),i?(m[e+"transition-property"]=e+"transform"+(void 0!==o.opacity?", opacity":""),m[e+"transition-duration"]=i+"ms",n&&(m[e+"transition-timing-function"]=n),"function"==typeof c&&(p.one(s,y),setTimeout(y,i+50)),p.css(m)):(m[e+"transition"]="none",p.css(m),"function"==typeof c&&setTimeout(function(){c.call(p[0])},50))):(m.left=o.origo[0]+o.position[0],m.top=o.origo[1]+o.position[1],void 0!==o.size?(m.width=o.size[0],m.height=o.size[1]):(m.width=o.baseSize[0]*u[0],m.height=o.baseSize[1]*u[1],m.left-=(m.width-o.baseSize[0])*o.origin[0],m.top-=(m.height-o.baseSize[1])*o.origin[1]),i?p.animate(m,i,c):(p.css(m),"function"==typeof c&&setTimeout(function(){c.call(p[0])},50))),this}}(jQuery,window,document);
!function(e,t,n,o){"use strict";e.fn.swipe=function(o){o=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onClick:!1,onFinished:!1,treshold:20,swipeoutSpeed:300,overTreshold:.25},o);var a=function(e){return[e.outerWidth(),e.outerHeight()]},i=function(t){return e.isArray(t)?Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)):Math.abs(t)},r=function(e){return e.touches&&1===e.touches.length?[Math.round(e.touches[0].pageX),Math.round(e.touches[0].pageY)]:null!==e.clientX?[Math.round(e.pageX),Math.round(e.pageY)]:null},u=function(e){return e.touches&&1===e.touches.length?Math.round(e.touches[0].pageX):null!==e.pageX?Math.round(e.pageX):null};return this.each(function(){var s,l,d,p,h,c,f,g=e(this),w=g.parent(),m=g.data("lsw_ns")||"lsw_"+Math.floor(1e4*Math.random()),v=!0,S=null,T=g.hasClass("audio")||g.hasClass("video"),y=function(t){if(g.data("scrolling"))return!1;if(t.originalEvent.touches&&t.originalEvent.touches.length>1||"mousedown"===t.type&&1!==t.which)return!0;if(T){var o=t.target.nodeName.toLowerCase();if("audio"===o||"video"===o&&t.target.controls&&t.offsetY>e(t.target).height()-60)return!0}return"touchstart"!==t.type&&t.preventDefault(),g.stop(!0,!1),g.data("scrolling",!1),g.data("swipeEnded",!1),g.data("taplength",0),p=(new Date).getTime(),l=l||a(w),s=s||a(g),v=l[1]>=s[1],v?(h=u(t.originalEvent),c=0,f=g.translateX()):(h=r(t.originalEvent),c=[0,0],f=g.translate()),"mousedown"===t.type&&(n.on("mousemove."+m,M),g.on("mouseup."+m+" mouseout."+m,E)),"touchstart"===t.type},M=function(e){return!!(e.originalEvent.touches&&e.originalEvent.touches.length>1)||(e.preventDefault(),v?(c=u(e.originalEvent)-h,g.translateX(f+c)):((c=r(e.originalEvent))[0]-=h[0],c[1]-=h[1],g.translate([f[0]+c[0],f[1]+c[1]])),!1)},E=function(e){if(g.data("swipeEnded"))return!0;e.preventDefault(),g.data("swipeEnded",!0);var t=(new Date).getTime()-p,a=1+o.swipeoutSpeed/t,r=function(){"function"==typeof o.onFinished&&o.onFinished.call(g[0],e)},u=function(){c&&"function"==typeof o.onSmallSwipe&&o.onSmallSwipe.call(g[0],e),"function"==typeof o.onClick&&o.onClick.call(g[0],e)},d=function(t){t?"function"==typeof o.onSwipedRight&&o.onSwipedRight.call(g[0],e):"function"==typeof o.onSwipedLeft&&o.onSwipedLeft.call(g[0],e)};if("mouseup"===e.type||"mouseout"===e.type?(n.off("mousemove."+m),g.off("mouseup."+m+" mouseout."+m)):"pointerup"===e.type&&g.off("pointermove."+m+" pointerup."+m),g.data("taplength",t),v)if(Math.abs(c)>o.treshold){w=f+c*a;l[0]>=s[0]||c>0&&w-s[0]/2>l[0]*(o.overTreshold-.5)||w+s[0]/2<l[0]*(.5-o.overTreshold)?(g.data("scrolling",!1),g.translateXAndFade(w,0,o.swipeoutSpeed),S=setTimeout(r,o.swipeoutSpeed+20),d(c>0)):g.translateX(w,o.swipeoutSpeed)}else c&&g.translateX(0,100),u();else if(i(c)>o.treshold){var h=parseInt(g.css("top")),w=[f[0]+c[0]*a,c[1]>0?Math.min(-h,f[1]+c[1]*a):Math.max(-h+l[1]-s[1],f[1]+c[1]*a)];c[0]>0&&w[0]-s[0]/2>l[0]*(o.overTreshold-.5)||w[0]+s[0]/2<l[0]*(.5-o.overTreshold)?(g.data("scrolling",!1),g.translateAndFade(w,0,o.swipeoutSpeed),S=setTimeout(r,o.swipeoutSpeed+20),d(c[0]>=0)):g.translate(w,o.swipeoutSpeed)}else(c[0]||c[1])&&g.translate([0,0],100),u();return!1},X=function(e){return e.preventDefault(),!1},C=function(){setTimeout(function(){g.data("scrolling",!1)},20),g.removeAttr("draggable"),g.add(n).off("."+m)};g.add(n).off("."+m),g.data("lsw_ns",m),t.on("resize."+m,function(){clearTimeout(d),d=setTimeout(function(){l=a(w)},50)}),g.attr("draggable","false").on(TOUCH.START+"."+m+" dragstart."+m+" mousedown."+m,y).on(TOUCH.MOVE+"."+m+" drag."+m,M).on(TOUCH.END+"."+m,E).on("removeSwipe."+m,C).on("selectstart."+m,X)})}}(jQuery,jQuery(window),jQuery(document));
!function(e,n,t,o){"use strict";e.fn.addMap=function(n){n=e.extend({},e.fn.addMap.defaults,n);var o=function(e){var n,t;return"string"==typeof e?(e=e.split(","),n=parseFloat(e[0]),t=e.length>1?parseFloat(e[1]):0):(n=e[0]||e.lat||0,t=e[1]||e.lng||0),{lat:n,lng:t}},a=function(e){for(var n=0;n<e.length;n++)e[n].hasOwnProperty("pos")&&!e[n].hasOwnProperty("latLng")&&(e[n].latLng=o(e[n].pos))},r=function(e){for(var n,t=-180,o=-90,a=90,r=180,s=0;s<e.length;s++)(n=e[s].latLng)&&(r>n.lng&&(r=n.lng),a>n.lat&&(a=n.lat),t<n.lng&&(t=n.lng),o<n.lat&&(o=n.lat));return t<r&&(t=180,r=-180),o<a&&(o=90,a=-90),{east:t,west:r,north:o,south:a}},s=function(e,n){if("undefined"==typeof google||!google.maps){var o=t.createElement("script");return o.type="text/javascript",o.src=n.apiUrl+"?key="+(n.apiKey||""),o.onload=function(){setTimeout(function(){l(e,n)},40)},void t.body.appendChild(o)}l(e,n)},l=function(n,t){var s,l,i=function(){e.isFunction(t.click)&&t.click.call(this)};if(t.markers&&t.markers.length>1){a(t.markers);var p=r(t.markers),g=t.markers.length;s=new google.maps.Map(n[0],{center:{lat:(p.north+p.south)/2,lng:(p.east+p.west)/2},zoom:t.zoom,mapTypeId:t.type,scrollwheel:!1,panControl:!1});for(var d=0;d<g;d++)t.markers[d].hasOwnProperty("latLng")&&(l=new google.maps.Marker({position:t.markers[d].latLng,map:s}),t.markers[d].hasOwnProperty("title")&&l.setTitle(t.markers[d].title),t.markers[d].hasOwnProperty("link")&&(l.link=t.markers[d].link,google.maps.event.addListener(l,"click",i)));t.fitBounds&&google.maps.event.addListenerOnce(s,"idle",function(){s.fitBounds(p)})}else{var m=o(t.location||t.markers[0].pos);s=new google.maps.Map(n[0],{center:m,zoom:t.zoom,mapTypeId:t.type,scrollwheel:!1,panControl:!1}),l=new google.maps.Marker({position:m,map:s})}t.hasOwnProperty("onTypeChanged")&&e.isFunction(t.onTypeChanged)&&google.maps.event.addListener(s,"maptypeid_changed",function(){t.onTypeChanged.call(s.getMapTypeId())}),t.hasOwnProperty("onZoomChanged")&&e.isFunction(t.onZoomChanged)&&google.maps.event.addListener(s,"zoom_changed",function(){t.onZoomChanged.call(s.getZoom())})};return e(this).each(function(){s(e(this),e.extend(n,readData(e(this),"location,type,zoom,label,markers,current")))})},e.fn.addMap.defaults={apiUrl:"https://maps.googleapis.com/maps/api/js",zoom:16,fitBounds:!0,type:"roadmap"}}(jQuery,window,document);
!function(t,e,o,a,n){"use strict";t.fn.lightbox=function(n,i){if(typeof n===UNDEF)return this;i=t.extend({},t.fn.lightbox.defaults,i);var s,l,r,d,c,h,p,u,f,m,b,g,v,T,w,C,y,x,S,k,O,A,P=t(this),I=getTranslations(t.fn.lightbox.text),L=t([]),F=t(),E=t(),M=t(),N=t(),V=t(),B=!0,H=!1,D=!1,R=!1,G=!1,X=!1,z=!1,U=null,W=null,q=null,Z=-1,K=0,Q=0,_=P.data("llb_ns"),Y=!!i.hasOwnProperty("extraSizes")&&i.extraSizes.split(/,\s*/),j=function(t){c.find(".modal").trigger("destroy")},$=function(e){var o,a,n,s,l=c.width(),r=c.height(),h=M[0];if(clearTimeout(U),E&&E.length){if(clearTimeout(q),typeof d===UNDEF&&(d=2*parseInt(E.css("paddingTop"))),!(o=E.data("oWidth"))||!(a=E.data("oHeight")))if(B||D)o=typeof h.naturalWidth===UNDEF?h.width||M.width():h.naturalWidth,a=typeof h.naturalHeight===UNDEF?h.height||M.height():h.naturalHeight;else if(H)o=h.videoWidth,a=h.videoHeight;else if(G)o=c.width()-d,a=c.height()-d;else{var p=L.eq(Z).data(J.OBJ);o=p[J.IMAGE][J.WIDTH],a=p[J.IMAGE][J.HEIGHT]}o&&a?(E.data({oWidth:o,oHeight:a}),n=0,d&&(l-=d,r-=d),i.fitImages&&i.fitBetween&&(c.hasClass(i.captionVisibleClass)&&V&&V.length&&(r-=V.outerHeight()),i.thumbsVisible&&L.length>1&&f&&f.length&&(r-=n=f.outerHeight())),s=r*i.fitRatio/a,!i.fitBoth&&B||(s=Math.min(l*i.fitRatio/o,s)),!i.fitImages||R||G||(s<1||i.scaleUp)&&(o=Math.round(o*s),a=Math.round(a*s)),G&&(o=Math.min(l*i.fitRatio,o),a=Math.min(r*i.fitRatio,a)),!0===e?E.css({left:Math.round((l-o)/2),top:Math.round(n+(r-a)/2),width:o+d,height:a+d,opacity:0}).show():E.stop(!0,!1).animate({left:Math.round((l-o)/2),top:Math.round(n+(r-a)/2),width:o+d,height:a+d},500,function(){t(this).translateX(0,500)}),R||G||s>=1&&!i.scaleUp?c.addClass("no-zoom"):(c.removeClass("no-zoom"),c.toggleClass("zoomed",i.fitImages?s>1:s<1))):e&&(U=setTimeout($,!0,100))}},tt=function(){var t=c.find(".lightbox-main"),e=c.find(".lightbox-caption");if(t.length&&(t.off("."+_),!X))switch(i.transitionType){case"crossFadeAndSlide":t.translateXAndFade(-100*Q,0,i.speed,function(){t.remove()});break;case"crossFadeAndZoom":t.transform({scale:1+Q/40,opacity:0},i.speed,function(){t.remove()});break;default:t.opacity(0,i.speed,function(){t.remove()})}e.length&&(e.find(".buttons a").trigger("removeTooltip"),e.length>1&&(e.eq(-1).prevAll(".lightbox-caption").remove(),e=c.find(".lightbox-caption")),e.opacity(0,i.speed,function(){e.remove()}))},et=function(t){if(H=D=R=B=!1,!(G=t.hasOwnProperty(J.EXTERNAL)))switch(t[J.CATEGORY]){case"video":H=!0;break;case"audio":D=!0;break;case"other":R=!0;break;default:B=!0}},ot=function(o){V=t("<div>",{class:"lightbox-caption"+(l?" slideshow":"")}).hide().appendTo(c);var a=t("<div>",{class:"buttons"}),r=i.buttonLabels&&c.width()>=640;if(Y&&"image"===o[J.CATEGORY]){s=t("<div>",{class:"download icon-download"}).appendTo(a);for(var d=n.getImagePath(o),h=0;h<Y.length;h++)s.append(t("<a>",{text:Y[h],href:d.replace("slides/","dl/"+Y[h]+"/"),download:""}))}i.printImage&&"image"===o[J.CATEGORY]&&(s=t("<a>",{class:i.buttonClass+" icon-printer"}).appendTo(a),r?s.text(" "+I.print).data("tooltip",I.printLabel):s.data("tooltip",I.print),s.on("click",function(t){printImage(o[J.ORIGINAL]&&!i.rightClickProtect?o[J.ORIGINAL][J.PATH]:o[J.IMAGE][J.PATH],o[J.TITLE]||"",o[J.THUMBCAPTION]||"")})),!o[J.ORIGINAL]||i.rightClickProtect||"image"!==o[J.CATEGORY]&&!i.allowDownloadOthers||(s=t("<a>",{class:i.buttonClass+" icon-download",download:"",href:o[J.ORIGINAL][J.PATH]}).appendTo(a),r?s.text(" "+I.download):s.data("tooltip",I.download)),i.hasOwnProperty("shop")&&n.hasShop(o)&&(s=t("<a>",{class:i.buttonClass+" icon-shopping-cart"}).on("click",function(t){i.shop.root.trigger("addItems",o)}).appendTo(a),r?s.text(" "+I.addCart).data("tooltip",I.shopLabel):s.data("tooltip",I.addCart),s=t("<a>",{class:i.buttonClass+" secondary icon-shopping-cart"}).on("click",function(t){i.shop.root.trigger("showCart")}).appendTo(a),r?s.text(" "+I.viewCart):s.data("tooltip",I.viewCart)),o[J.PHOTODATA]&&(s=t("<a>",{class:i.buttonClass+" icon-camera"}).appendTo(a),r?s.text(" "+I.metaBtn).data("tooltip",I.metaLabel):s.data("tooltip",I.metaBtn),s.on("click",function(){return c.modal(t("<div>",{class:"photodata",html:o[J.PHOTODATA]}),{class:"small",title:I.metaBtn}),!1})),o[J.REGIONS]&&(s=t("<a>",{class:i.buttonClass+" icon-user"}).appendTo(a),r?s.text(" "+I.regionsBtn).data("tooltip",I.regionsLabel):s.data("tooltip",I.regionsBtn),s.on("click",function(){var e=c.find("."+i.regionsClass);if(e.length)e.remove();else{var a=JSON.parse(o[J.REGIONS]);e=t("<div>",{class:i.regionsClass}).appendTo(E);for(var n,s=0;s<a.length;s++)n=a[s].split(";"),e.append(t("<a>").css({left:100*parseFloat(n[1])+"%",top:100*parseFloat(n[2])+"%",width:100*parseFloat(n[3])+"%",height:100*parseFloat(n[4])+"%"}).append("<span>"+n[0]+"</span>"))}return!1})),o[J.LOCATION]&&(s=t("<a>",{class:i.buttonClass+" icon-location"}).appendTo(a),r?s.text(" "+I.mapBtn).data("tooltip",I.mapLabel):s.data("tooltip",I.mapBtn),s.on("click",function(){var a=t("<div>",{class:"map-cont"});return a.height(e.height()*i.mapHeight),c.modal(a,{class:"no-padding"}),setTimeout(function(){a.addMap({location:o[J.LOCATION],type:i.mapType,zoom:i.mapZoom,fitBounds:!1,onTypeChanged:function(t){i.mapType=t},onZoomChanged:function(t){i.mapZoom=t}})},100),!1})),o[J.MOSTPHOTOS]&&(s=t("<a>",{class:i.buttonClass+" icon-shopping-cart",target:"_blank",href:"http://mostphotos.com/"+o[J.MOSTPHOTOS]}).appendTo(a),r?s.text(" "+I.mostphotosBtn).data("tooltip",I.mostphotosLabel):s.data("tooltip",I.mostphotosBtn)),i.share&&(s=t("<a>",{class:i.buttonClass+" icon-connect"}).appendTo(a),r?s.text(" "+I.share).data("tooltip",I.shareLabel):s.data("tooltip",I.share),s.on("click",function(){var e=t("<div>",{class:"share-cont social-links text-center"});return c.modal(e,{class:"small",title:I.shareOn}),setTimeout(function(){e.renderShares({sites:i.share,title:o[J.TITLE]||o[J.NAME],description:o[J.COMMENT],image:n.getAbsoluteImagePath(o),href:n.getAbsolutePath(o)})},100),!1})),i.showNumbers&&a.prepend(t("<h4>",{class:"numbers",html:"<span>"+(Z+1)+"</span> / "+L.length})),a.is(":empty")||(V.addClass(i.hasbuttonsClass),V.append(a),a.children("a").addTooltip()),o[J.IMAGECAPTION]&&(V.append(t("<div>",{class:"caption",html:o[J.IMAGECAPTION]})),V.find("[data-tooltip]").addTooltip()),i.captionVisible&&!V.is(":empty")?(c.addClass(i.captionVisibleClass),V.show()):(c.removeClass(i.captionVisibleClass),i.captionVisible?V.remove():V.show())},at=function(){var t;Q<0&&Z>0?t=L.eq(Z-1).data(J.OBJ):Z<L.length-2&&(t=L.eq(Z+1).data(J.OBJ)),t&&"image"===t[J.CATEGORY]&&((new Image).src=n.getImagePath(t))},nt=function(e){var o="touch"===t("html").data("whatinput")||"touchend"===e.type;if(H||D){var a=N[0];a.paused?(a.play(),a.controls=!1,o&&(c.hasClass(i.captionVisibleClass)?(wt(),vt()):(Tt(),bt()))):(a.pause(),a.controls=!0,o&&(Tt(),bt()))}else B&&(o?c.hasClass(i.captionVisibleClass)?(wt(),vt()):(Tt(),bt()):i.clickForNext&&((e.pageX||e.originalEvent.pageX)-E.position().left>E.width()/2?xt():yt()))},it=function(){if(!(--K>0)){if(DEBUG){var e=new Date;G?console.log("External content loaded: "+(e-r)+"ms"):(console.log((H||D?"Media":"Image")+" ["+Z+"] loaded: "+(e-r)+'ms src="'+M[0].src+'"'),typeof M[0]!==UNDEF&&typeof N[0]!==UNDEF||console.log((M[0],UNDEF,"loadImage.done("+M[0].src+")")))}switch(E.hide().css("opacity",0),i.transitionType){case"crossFadeAndSlide":E.translateXAndFade(100*Q,0);break;case"crossFadeAndZoom":E.transform({scale:1-Q/40,opacity:0})}i.rightClickProtect&&N.on("contextmenu",function(t){return t.preventDefault(),!1}),(H||D)&&(N.attr("autoplay",i.videoAuto),N[0].volume=i.volume,N[0].onvolumechange=function(){i.volume=this.volume}),setTimeout(function(){switch($(!0),p.hide(),E.show(),i.transitionType){case"crossFadeAndSlide":E.translateXAndFade(0,1,i.speed);break;case"crossFadeAndZoom":E.transform({scale:[1,1],opacity:1},i.speed);break;default:E.opacity(1,i.speed)}setTimeout(function(){G&&E.children("iframe").length||E.swipe({onSwipedLeft:function(){X=!0,xt()},onSwipedRight:function(){X=!0,yt()},onFinished:function(){z||(t(this).trigger("removeSwipe"),t(this).remove())},onClick:nt}),!1!==i.onLoadEnd&&i.onLoadEnd(F),i.preloadNext&&at()},i.speed/2)},50),i.useSlideshow&&l?D||H?(pt(),N[0].onended=function(){ct()}):(clearTimeout(l),O&&O.find(".progress").show(),l=setTimeout(xt,i.slideshowDelay)):(ht(!0),i.autohideControls&&Ct())}},st=function(e){if("number"!=typeof e&&(e=L.index(e)),e<0||e>=L.length){if(z=!0,e<0)switch(i.afterLast){case"donothing":e=0;break;case"startover":e=L.length-1;break;case"onelevelup":i.level&&(window.location.href="../"+i.indexName),e=0;break;case"nextfolder":i.baseSet&&i.previousFoldersLast&&(window.location.href=i.previousFoldersLast),e=0;break;default:lt()}else switch(i.afterLast){case"donothing":e=L.length-1;break;case"startover":e=0;break;case"onelevelup":i.level&&(window.location.href="../"+i.indexName),e=L.length-1;break;case"nextfolder":i.baseSet&&i.nextFoldersFirst&&(window.location.href=i.nextFoldersFirst),e=L.length-1;break;case"ask":var o=new Array;return X&&(E.translateXAndFade(0,1,2*i.speed),X=!1),L.length>1&&o.push({t:I.startOver,c:"icon-loop",h:function(t){st(0)}}),i.level&&o.push({t:i.level?I.upOneLevel:i.homepageLinkText||I.backToHome,c:"icon-up-one-level",h:function(){window.location.href="../"+i.indexName}}),o.push({t:I.backToIndex,c:"icon-index",h:function(){lt()}}),i.baseSet&&i.nextFoldersFirst&&o.push({t:I.nextFolder,c:"icon-arrow-right",h:function(){window.location.href=i.nextFoldersFirst}}),void c.modal(t("<p>",{class:"text-center",text:I.atLastPageQuestion}),o,{onClose:function(){st(L.length-1)},class:"secondary",title:I.atLastPage});default:lt()}X&&(E.translateXAndFade(0,1,2*i.speed),X=!1)}else z=!1;if(c.is(":visible")){if(Q=Z>e?-1:Z<e?1:0,Z===e)return}else a.css("overflow","hidden"),Q=0,i.useFullScreen&&t("html").fullScreen(!0),c.show(),i.autoStart&&dt(),Ot(At);j();var s;if(Z=e,F=L.eq(Z),s=F.data(J.OBJ),i.useThumbstrip&&L.length>1&&St(),!s)return void console.log("Fatal error: image ("+Z+") is missing from the database! (Upload data1.json again!)");p.show(),O&&O.find(".progress").hide(),et(s),!1!==i.onLoadStart&&i.onLoadStart(F),setTimeout(function(){if(tt(),X=!1,K=1,r=new Date,E=t("<div>",{class:"lightbox-main "+(G?"external":s[J.CATEGORY])}).hide().appendTo(c),B)N=M=t("<img>").one("load."+_,function(t){it()}).attr("src",n.getImagePath(s)).appendTo(E),DEBUG&&console.log("Loading image ["+Z+'] src="'+n.getImagePath(s)+'"'),M[0].complete&&M[0].naturalWidth>0&&(M.off("load."+_),it());else if(H)N=M=t("<video>",{preload:"auto",controls:"true",controlsList:" nodownload",poster:n.getPosterPath(s)}).one("loadedmetadata",function(t){it()}).attr("src",n.getSourcePath(s)).appendTo(E);else if(D)K=2,M=t("<img>",{class:"poster"}).one("load",function(t){it()}).attr("src",n.getPosterPath(s)).appendTo(E),N=t("<audio>",{preload:"auto",controls:"true",controlsList:"nofullscreen nodownload"}).one("loadedmetadata",function(t){it()}).attr("src",n.getSourcePath(s)).appendTo(E);else if(G){var e=s[J.EXTERNAL].cont,o=s[J.EXTERNAL].size;o&&(o=o.split("x"),E.data({oWidth:parseInt(o[0]),oHeight:parseInt(o[1])})),E.one("DOMReady",function(t){it()}),e.match(/^https?\:\/\//i)?E.addClass("iframe").append(t("<iframe>",{width:"100%",height:"100%",src:e,frameborder:0,allowfullscreen:"allowfullscreen"})):E.append(e),setTimeout(it,200)}else t("<a>",{href:n.getSourcePath(s),target:"_blank"}).append(t("<img>",{class:"other"}).one("load",function(t){it()}).attr("src",n.getImagePath(s))).appendTo(E),t("<p>",{class:"click-hint",html:I.clickToOpen}).appendTo(E);ot(s)},i.speed/4)},lt=function(){ht(!0),a.css("overflow",""),E.length?c.fadeOut(i.speed,function(){i.useFullScreen&&t("html").fullScreen(!1),E.length&&(E.remove(),E=t()),V.length&&(V.remove(),V=t()),!1!==i.onClose&&i.onClose(F)}):!1!==i.onClose&&i.onClose(F)},rt=function(){ht(!0),L.off("."+_),o.add(e).add(c).off("."+_),a.css("overflow",""),E.length?E.animate({opacity:0},i.speed,function(){c.remove()}):c.remove()},dt=function(e){clearTimeout(l),c.addClass(i.playingClass),i.autohideControls&&Ct(),l=setTimeout(xt,i.slideshowDelay/4),!0!==e&&i.backgroundAudioSlideshowControl&&t("[data-audioplayer]").trigger("startPlayer"),!1!==i.onSlideshowStart&&i.onSlideshowStart(F)},ct=function(){i.autohideControls&&Ct(),c.addClass(i.playingClass),l=setTimeout(xt,i.slideshowDelay/4),i.backgroundAudioSlideshowControl&&t("[data-audioplayer]").trigger("startPlayer")},ht=function(e){!1!==i.onSlideshowPause&&i.onSlideshowPause(F),!0!==e&&i.backgroundAudioSlideshowControl&&t("[data-audioplayer]").trigger("pausePlayer"),l=clearTimeout(l),c.removeClass(i.playingClass),W=clearTimeout(W)},pt=function(){i.backgroundAudioSlideshowControl&&t("[data-audioplayer]").trigger("pausePlayer"),l=clearTimeout(l),Tt()},ut=function(){i.fitImages=!i.fitImages,Lt(),$()},ft=function(){c.addClass(i.thumbsVisibleClass),i.thumbsVisible=!0,Lt(),$()},mt=function(){c.removeClass(i.thumbsVisibleClass),i.thumbsVisible=!1,Lt(),$()},bt=function(){c.addClass(i.captionVisibleClass),i.captionVisible=!0,Lt(),$()},gt=function(){i.captionVisible||i.thumbsVisible?i.thumbsVisible=i.captionVisible=!1:(c.addClass(i.thumbsVisibleClass).addClass(i.captionVisibleClass),i.thumbsVisible=i.captionVisible=!0),Lt(),$()},vt=function(){c.removeClass(i.captionVisibleClass),i.captionVisible=!1,Lt(),$()},Tt=function(){W=clearTimeout(W),c.removeClass(i.controlsHideClass)},wt=function(){W=clearTimeout(W),b.hideAllTooltips(),c.addClass(i.controlsHideClass)},Ct=function(){clearTimeout(W),W=setTimeout(wt,l?Math.min(i.slideshowDelay/2,1500):1500)},yt=function(){st(Z-1)},xt=function(){st(Z+1)},St=function(){if(i.useThumbstrip&&!(L.length<2)){var t=m.children().eq(Z),e=t.position().left,o=t.width(),a=m.translateX(),n=f.width(),s=m.width();m.children().removeClass(i.activeClass),t.addClass(i.activeClass),e<-a?m.translateX(Math.min(0,i.thumbOverhead-e),i.thumbSpeed,Ot):e+o>n-a?m.translateX(Math.max(n-e-o-i.thumbOverhead,n-s),i.thumbSpeed,Ot):n-a>s&&m.translateX(n-s,i.thumbSpeed,Ot)}},kt=function(e){e.length&&e.append(t("<img>",{class:"hide-image"}).one("load",function(){t(this).removeClass("hide-image").addClass("show-image")}).attr("src",e.attr("href"))).removeAttr("href")},Ot=function(e){if(c.is(":visible")&&i.useThumbstrip&&!(L.length<2)){var o=f.width(),a=m.translateX()||0;m.children("."+i.lazyloadClass).each(function(){var e=t(this),n=e.position().left,s=e.width();if(n+a<o&&n+s+a>0)e.removeClass(i.lazyloadClass),kt(e),e.addTooltip({delay:1e3});else if(n+a>=o)return!1}),"function"==typeof e&&e.call(this)}},At=function(){if(c.is(":visible")){var t=m.children(":last-child");t.position().left+t.outerWidth()>f.width()?(u.addClass(i.scrollClass),St()):(u.removeClass(i.scrollClass),m.translateX(0,i.thumbSpeed))}},Pt=function(t){var e=f.width(),o=m.translateX()||0;e>m.width()?o&&m.translateX(0,i.thumbSpeed,Ot):(o=t<0?Math.min(0,o+e):Math.max(e-m.width(),o-e),m.translateX(o,i.thumbSpeed,Ot))},It=function(){i.thumbsVisible&&c.addClass(i.thumbsVisibleClass),(u=t("<div>",{class:"thumb-strip"}).appendTo(c)).append(t("<button>",{class:"left icon-drop-left"}).on("click."+_,function(t){return Pt(-1),!1})),u.append(t("<button>",{class:"right icon-drop-right"}).on("click."+_,function(t){return Pt(1),!1})),(f=t("<div>",{class:"thumb-cont"}).appendTo(u)).on("selectstart."+_,function(t){return!1});var e,o,a,s=(m=t("<div>",{class:"thumbs"}).appendTo(f)).height()||60,l=0;L.each(function(r){e=t(this).data(J.OBJ),(a=t("<a>",{class:i.lazyloadClass,title:e[J.THUMBCAPTION]||"",href:n.getThumbPath(e)}).appendTo(m)).on("click",function(e){var o=t(e.target).closest("a");return st(m.children().index(o)),!1}),o=(s-4)*e[J.THUMB][J.WIDTH]/e[J.THUMB][J.HEIGHT],a.width(o),l+=o})},Jt=function(){b=t("<div>",{class:"controls"}).appendTo(c),L.length>1&&(g=t("<button>",{type:"button",class:"lightbox-btn previous icon-previous",title:I.previousPicture}).on("click."+_,yt).appendTo(b)),v=t("<button>",{type:"button",class:"lightbox-btn up icon-up-light",title:I.upOneLevel}).on("click."+_,lt).appendTo(b),i.useZoom&&(T=t("<button>",{type:"button",class:"lightbox-icon zoom-in icon-expand",title:I.oneToOneSize}).on("click."+_,ut).appendTo(b),w=t("<button>",{type:"button",class:"lightbox-icon zoom-out icon-contract",title:I.fitToScreen}).on("click."+_,ut).appendTo(b)),i.useThumbstrip&&L.length>1&&(C=t("<button>",{type:"button",class:"lightbox-icon show-thumbs icon-show-top-thumbs",title:I.showThumbs}).on("click."+_,ft).appendTo(b),y=t("<button>",{type:"button",class:"lightbox-icon hide-thumbs icon-hide-top-thumbs",title:I.hideThumbs}).on("click."+_,mt).appendTo(b)),x=t("<button>",{type:"button",class:"lightbox-icon show-caption icon-show-bottom-panel",title:I.showInfo}).on("click."+_,bt).appendTo(b),S=t("<button>",{type:"button",class:"lightbox-icon hide-caption icon-hide-bottom-panel",title:I.hideInfo}).on("click."+_,vt).appendTo(b),i.useSlideshow&&L.length>1&&(k=t("<button>",{type:"button",class:"lightbox-icon play icon-slideshow",title:I.startSlideshow}).on("click."+_,dt).appendTo(b),O=t("<button>",{type:"button",class:"lightbox-icon pause icon-pause",title:I.pause}).append(t("<span>",{class:"progress"})).on("click."+_,ht).appendTo(b)),L.length>1&&(A=t("<button>",{type:"button",class:"lightbox-btn next icon-next",title:I.nextPicture}).on("click."+_,xt).appendTo(b)),b.children("button").addTooltip({delay:1e3})},Lt=function(){var e,o,a={};for(e in i.prefsKept)o=i.prefsKept[e],i.hasOwnProperty(o)&&(a[o]=i[o]);a&&t.cookie("lb_pref",a)};if(_&&function(o){e.add(document).off("."+o),t("#"+o).remove()}(_),P.data("llb_ns",_="llb_"+Math.floor(1e4*Math.random())),L=P.find(i.delegate),function(){var e,o,a=t.cookie("lb_pref");if(a)for(e in i.prefsKept)o=i.prefsKept[e],a.hasOwnProperty(o)&&(i[o]="true"===a[o]||"false"===a[o]?!!a[o]:a[o])}(),function(e){c=t("<div>",{id:e,class:"lightbox"}).hide().appendTo("body"),h=t("<div>",{class:"lightbox-overlay"}).appendTo(c),p=t("<div>",{class:"lightbox-loading"}).append("<div>").appendTo(c),c.toggleClass(i.thumbsVisibleClass,i.thumbsVisible&&L.length>1),c.toggleClass(i.captionVisibleClass,i.captionVisible),c.toggleClass("zoomed",i.fitImages),Jt(),i.useThumbstrip&&L.length>1&&It()}(),"touch"!==t("html").data("whatinput")&&c.on("mousemove."+_,function(){c.hasClass(i.controlsHideClass)&&Tt(),i.autohideControls&&Ct()}),e.on("resize."+_,function(){clearTimeout(q),q=setTimeout(function(){E&&E.length&&$(),Ot(At)},50)}),i.quitOnDocClick&&h.on("click."+_,function(e){E.length&&!t(e.target).is(E)&&lt()}),i.enableKeyboard&&o.on("keyup."+_,function(t){if(!E.length||c.children(".modal:visible").length)return!0;switch(t.preventDefault(),t.keyCode){case 27:lt();break;case 37:yt();break;case 39:xt();break;case 97:case 35:st(L.length-1);break;case 103:case 36:st(0);break;case 106:case 179:l?ht():dt();break;case 107:ut();break;case 109:gt();break;case 32:H||D?N[0].paused?N[0].play():N[0].pause():l?ht():dt();break;default:return!0}return!1}),i.enableMouseWheel){var Ft=null;e.on("mousewheel."+_+" DOMMouseScroll."+_,function(t){return Ft=clearTimeout(Ft),!(E.length&&!c.children(".modal:visible").length)||(Ft=setTimeout(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?yt:xt,100),!1)})}return P.on("lightboxLoad."+_,function(t,e,o){ht(!0),e="number"==typeof e?Math.minMax(0,e,L.length):typeof e===UNDEF?0:L.index(e),!1!==i.onStart&&i.onStart("number"==typeof e?L.eq(e):th),st(e),o&&dt()}).on("lightboxQuit."+_,function(){return lt(),!1}).on("lightboxRemove."+_,function(){return rt(),!1}).on("lightboxContainer."+_,function(){return c}).on("lightboxNext."+_,function(){return ht(),xt(),!1}).on("lightboxPrevious."+_,function(){return ht(),yt(),!1}),i.hasOwnProperty("onReady")&&i.onReady(F),i.autoStart&&i.baseSet&&dt(),this},t.fn.lightbox.defaults={delegate:".card.lbable",buttonClass:"button small",lazyloadClass:"lazyload",activeClass:"active",scrollClass:"scroll",regionsClass:"regions",captionVisibleClass:"caption-visible",thumbsVisibleClass:"thumbs-visible",hasbuttonsClass:"hasbuttons",controlsVisibleClass:"controls-visible",controlsHideClass:"controls-hide",playingClass:"playing",slideshowDelay:4e3,prefsKept:["thumbsVisible","captionVisible","fitImages"],thumbsVisible:!0,useThumbstrip:!0,captionVisible:!0,fitImages:!0,fitBoth:!0,fitBetween:!0,fitRatio:.94,scaleUp:!1,useZoom:!0,indexName:"index.html",baseSet:!0,autohideControls:!0,autoStart:!1,useSlideshow:!0,backgroundAudioSlideshowControl:!1,useFullScreen:!1,afterLast:"donothing",mapHeight:.8,videoAuto:!1,volume:.5,rightClickProtect:!1,buttonLabels:!0,showNumbers:!1,allowDownloadOthers:!1,printImage:!1,transitionType:"crossFadeAndSlide",speed:400,thumbSpeed:400,thumbOverhead:40,preloadNext:!0,enableKeyboard:!0,enableMouseWheel:!0,quitOnEnd:!0,quitOnDocClick:!0,clickForNext:!0,onStart:!1,onClose:!1,onLoadStart:!1,onLoadEnd:!1,onReady:!1,onSlideshowStart:!1,onSlideshowPause:!1},t.fn.lightbox.text={startOver:"Start over",upOneLevel:"Up one level",backToHome:"Back to home",backToIndex:"Back to index page",nextFolder:"Next folder",atLastPageQuestion:"Where to go next?",atLastPage:"At last page",atFirstPage:"At first page",previousPicture:"Previous image",nextPicture:"Next image",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showThumbs:"Show thumbnail strip",hideThumbs:"Hide thumbnail strip",showInfo:"Show caption / info",hideInfo:"Hide caption / info",startSlideshow:"Start slideshow",pause:"Pause",download:"Download",print:"Print",printLabel:"Print out this photo on your printer",mapBtn:"Map",mapLabel:"Show the photo location on map",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, share, send free eCards",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",regionsBtn:"People",regionsLabel:"Show tagged people",share:"Share",shareLabel:"Share this photo over social sites",shareOn:"Share on",shopBtn:"Buy",metaBtn:"Photo data",metaLabel:"Display photographic (Exif/Iptc) data",viewCart:"View cart",addCart:"Add to cart",shopLabel:"Add this item to the shopping cart",clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));
!function(t){"use strict";var o=["left","center","right"],e=["top","middle","bottom"];t.fn.alignTo=function(s,n){if(n=t.extend({},t.fn.alignTo.defaults,n),"string"==typeof s&&(s=t(s)),s instanceof t&&s.length){var a,p,i,r=t(window).width(),l=t(window).height(),f="fixed"===s.css("position"),d=function(o){var e={left:0,top:0};return o.parents().each(function(){if("fixed"===t(this).css("position"))return e.left=t(window).scrollLeft(),e.top=t(window).scrollTop(),e}),e}(s);if("AREA"===s[0].nodeName&&"RECT"===s[0].shape.toUpperCase()){var g=s[0].coords.split(",");p=parseInt(g[2],10)-parseInt(g[0],10),i=parseInt(g[3],10)-parseInt(g[1],10),(a=s.parent().offset()).left+=parseInt(g[0],10),a.top+=parseInt(g[1],10)}else a=f?s.position():s.offset(),p=s.outerWidth(),i=s.outerHeight();return a.left-=d.left,a.top-=d.top,t(this).each(function(){var s=t(this),g=n.pos[2],h=n.pos[3];s.css("maxHeight","none");var c=s.outerWidth(),u=s.outerHeight(),v=Math.round(a.left+n.pos[2]*p/2+(n.pos[2]-1)*n.gap),m=Math.round(a.top+n.pos[3]*i/2+(n.pos[3]-1)*n.gap),w=Math.round(v-n.pos[0]*c/2),x=Math.round(m-n.pos[1]*u/2);(x<0||x+u>l)&&(1!==n.pos[2]?x=2*x+u>l?l-u:0:0===n.pos[3]?l>2*a.top+i&&(x=a.top+i+n.gap,h=2):2===n.pos[3]&&l<2*a.top+i&&(x=Math.max(0,a.top-u-n.gap),h=0),x<0&&(x=0)),(w<0||w+c>r)&&(1!==n.pos[3]?w=2*w+c>r?r-c:0:0===n.pos[2]?r>2*a.left+p&&(w=a.left+p+n.gap,g=2):2===n.pos[2]&&r<2*a.left+p&&(w=Math.max(0,a.left-c-n.gap),g=0),w<0&&(w=0),w+c>r&&s.css({maxWidth:r-w-(parseInt(s.css("paddingLeft"),10)+parseInt(s.css("paddingRight"),10))})),f?s.css({position:"fixed",left:w,top:x}):s.css({position:"absolute",left:w+d.left,top:x+d.top}),s.removeClass("align-left align-center align-right valign-top valign-middle valign-bottom").addClass("align-"+o[g]).addClass("valign-"+e[h])})}},t.fn.alignTo.defaults={gap:0,pos:[1,2,1,0]}}(jQuery);
!function(t){"use strict";t.fn.hideAllTooltips=function(){return this.each(function(){t(this).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).hide()})})},t.fn.destroyAllTooltips=function(){return this.each(function(){t(this).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).remove()})})},t.fn.addTooltip=function(e,o){typeof e===UNDEF||"string"==typeof e||e.jquery||(o=e,e=null),o=t.extend({},t.fn.addTooltip.defaults,o);var i=function(e,i){var n;if(i)if("string"==typeof i)n=t("<div>",{html:i}).appendTo("body");else{if(!i.jquery)return null;n=t.contains(document.body,i[0])?i:i.appendTo("body")}else{if((i=e.data("tooltip"))?("."===i.charAt(0)?i=e.find(i).eq(0):"#"===i.charAt(0)&&(i=t(i)),i.jquery&&i.removeClass("hidden")):(i=e.attr("title"),e.removeAttr("title")),!i||!i.length)return null;n=t("<div>",{html:i}).appendTo("body")}return n.attr("id",e.attr("data-tooltip-id")).addClass(o.className).attr("role","tooltip").attr("aria-hidden",!0).hide().append(t("<span>",{class:o.nub})),n};return this.each(function(){if(this["data-tooltip-id"])return!0;var n,a,r,u,l,f=t(this),s=!1,d=!1,c="",p=!1,T="_ltt_"+Math.floor(1e4*Math.random()),h=/(Firefox\/\d+)/.test(navigator.userAgent),m=function(){return!!(n=i(f,e))&&(n.on("mouseover."+T,v).on("mouseout."+T,y),n.find("input, textarea").on("focus."+T,function(){d=!0,v()}).on("blur."+T,function(){d=!1}),!0)},v=function(t){r=clearTimeout(r),s=!0,n.finish().show()},y=function(t){d||(clearTimeout(r),s=!1,r=setTimeout(g,100))},g=function(){a=clearTimeout(a),r=clearTimeout(r),s=!1,c="",n&&n.stop(!0,!1).fadeOut(200,function(){n.hide()})},b=function(){var t=f.offset();u||(u=t),t.top===u.top&&t.left===u.left&&n.fadeIn(300).alignTo(f,{gap:10,pos:o.pos}),setTimeout(function(){c=""},1e3)},A=function(t){r=-1===c.indexOf(TOUCH.START)?setTimeout(g,100):setTimeout(g,8e3)},O=function(t){t.preventDefault(),a=clearTimeout(a),r=clearTimeout(r)},x=function(){return!!n&&n.is(":visible")&&n.css("opacity")>.99},C=function(t){var e=t.closest("a");return e.length&&e.attr("href")&&!e.attr("href").startsWith("javascript")},j=function(e){if(a=clearTimeout(a),-1!==c.indexOf(TOUCH.START)||h){var i=new Date;if(o.touchToggle||i-l>1e3)return!(!C(t(e.target))||!x())||(O(e),p?g():b(),!1)}return p&&(r=clearTimeout(r),g()),c="",s=!1,!0},U=function(t){var e=new Date;if(c?-1===c.indexOf(t.type)&&(c+="."+t.type):(c="."+t.type,p=x(),l=e,u=f.offset()),n)n.stop(!0,!1),r=clearTimeout(r);else if(!m())return q(),!0;return clearTimeout(a),t.type!==TOUCH.START&&(a=setTimeout(b,o.delay)),!0},q=function(e){f.off("."+T),a=clearTimeout(a),r=clearTimeout(r),t("#"+f.attr("data-tooltip-id")).remove(),f.attr("data-tooltip-id",null)};f.attr("data-tooltip-id",T).on("destroyTooltip",q).on("removeTooltip",g).on("focus."+T+" mouseenter."+T+" "+TOUCH.START+"."+T,U).on("blur."+T+" mouseleave."+T,A).on("click."+T,j)})},t.fn.addTooltip.defaults={delay:50,className:"tool-tip",nub:"nub",stay:2e3,touchToggle:!1,pos:[1,2,1,0]}}(jQuery);
!function(e,t,o){"use strict";e.fn.modal=function(n,a,s){if("string"==typeof n&&(n=e(document.createTextNode(n))),n instanceof e&&n.length){e.isArray(a)||(s=a,a=null),s=e.extend({},e.fn.modal.defaults,s);var l,d,i,c,r=e(this),u=getTranslations(e.fn.modal.text),h=!1,f="lmo_"+Math.floor(1e4*Math.random()),p=null,m=null,T=function(){c.css({overflow:"auto",maxHeight:.8*t.height()-(d.hasClass("has-header")?i.height():0)})},v=function(){return p=clearTimeout(p),l.destroyAllTooltips().fadeOut(s.speed,function(){h?l.hide().css("opacity",1):l.remove(),t.off("."+f)}),o.removeClass("has-modal"),!1};return function(){if(e.contains(document.documentElement,n[0]))d=(l=n).children().eq(0),i=d.find(".close").eq(0),c=d.find(".content").eq(0),h=!0;else if(l=e("<div>",{class:"modal"}).appendTo(r),d=e("<div>",{class:"window "+(s.class||""),role:"dialog"}).appendTo(l),(i=e("<a>",{class:"btn close",title:u.closeWindow}).appendTo(d)).addTooltip(),c=e("<div>",{class:"content"}).appendTo(d),s.title&&d.addClass("has-header").prepend(e("<header>",{text:s.title})),c.append(n.show()),a){var t,f,p=e("<div>",{class:"buttons"}).appendTo(c),m=function(t){t.preventDefault();var o=t.target;return e.isFunction(o.handler)&&!1!==o.handler.call(this)&&v(),!1};for(t=0;t<a.length;t++)f=e("<button>",{class:"button "+(a[t].c||""),html:" "+a[t].t}).on("click",m).appendTo(p),e.isFunction(a[t].h)&&(f[0].handler=a[t].h)}l.hide().css("opacity",1).fadeIn(s.speed),o.addClass("has-modal"),l.on("destroy",v),i.add(l).on("click",function(t){t.target===this&&(e.isFunction(s.onClose)&&s.onClose.call(this),v())}),T()}(),s.autoFade&&(p=setTimeout(v,s.autoFade)),t.on("resize."+f,function(){clearTimeout(m),m=setTimeout(T,20)}),this}},e.fn.modal.defaults={speed:300,autoFade:0,width:400,type:"normal"},e.fn.modal.text={closeWindow:"Close window"}}(jQuery,jQuery(window),jQuery("body"));
!function(t,e,a){"use strict";t.fn.matchHeight=function(i){return i=t.extend({},t.fn.matchHeight.defaults,i),t(this).each(function(){var s,o=t(this),h=o.find("."+i.delegate),l=o.data("lmh_ns"),n=function(e){if(!e.hasClass(i.delegate))return t();for(var a=h.length,s=e.closest("."+i.delegate),o=h.index(s),l=s,n=Math.floor(s.offset().top),d=o-1;d>=0&&Math.round(h.eq(d).offset().top)===n;d--)h.eq(d).hasClass(i.lazyloadClass)||(l=l.add(h.eq(d)));for(d=o+1;d<a&&Math.round(h.eq(d).offset().top)===n;d++)h.eq(d).hasClass(i.lazyloadClass)||(l=l.add(h.eq(d)));return l},d=function(e){if(e)if(i.match){for(var a,s=0;s<i.match.length;s++)(a=i.match[s]===i.delegate?e:e.find("."+i.match[s])).hasClass(i.verticalMiddleClass)?i.usePadding?a.css({height:"auto",paddingTop:0}):a.css({height:"auto",marginTop:0,marginBottom:0}):a.height("auto");if(e.length>1)for(s=0;s<i.match.length;s++)a=i.match[s]===i.delegate?e:e.find("."+i.match[s]),h=0,a.each(function(){(o=t(this).height())>h&&(h=o)}),a.each(function(){var e=t(this);e.hasClass(i.verticalMiddleClass)?(o=e.height())<h?i.usePadding?e.css({height:h,paddingTop:Math.floor((h-o)/2)}):e.css({height:"auto",marginTop:Math.floor((h-o)/2),marginBottom:Math.ceil((h-o)/2)}):i.usePadding?e.css({height:"auto",paddingTop:0}):e.css({height:"auto",marginTop:0,marginBottom:0}):e.height(h)})}else if(e.height("auto"),e.length>1){var o,h;e.each(function(){(o=t(this).height())>h&&(h=o)}),e.height(h)}},f=function(e){if(o.is(":visible")){var a=e?e.closest("."+i.delegate):null;if(a&&a.length)d(n(a));else{var s,h=t();(!e||e.data("lmh_ns")?o.find("."+i.delegate):e.closest("."+i.delegate)).not("."+i.lazyloadClass).each(function(e){a=t(this).height("auto"),h.length?a.offset().top-s.offset().top>2?(d(h),s=h=a):h=h.add(a):s=h=a}),d(h)}}};l&&a.add(e).off("."+l),o.data("lmh_ns",l="lmh_"+Math.floor(1e4*Math.random())),e.on("scroll."+l+" resize."+l,function(t){return clearTimeout(s),s=setTimeout(f,50),!0}),o.on("refresh",function(e,a){f(t(typeof a===UNDEF?e.target:a))}),o.find("."+i.preloadClass+":first-child img").waitAllImg(function(){f()})})},t.fn.matchHeight.defaults={delegate:"card",lazyloadClass:"lazyload",verticalMiddleClass:"vertical-middle",preloadClass:"preload",usePadding:!0}}(jQuery,jQuery(window),jQuery(document));
!function(t,a,n){"use strict";t.fn.paypal=function(e,o){if(!(o=t.extend({},t.fn.paypal.defaults,e.getRootProperty(J.SHOP),o)).id)return console.log("paypal.js: no Seller ID found"),this;if(!o.currency)return console.log("paypal.js: no currency found"),this;o.hasOwnProperty("handling")&&(o.handling=Math.abs("string"==typeof o.handling?parseFloat(o.handling):o.handling)),o.hasOwnProperty("discount")&&(o.discount=Math.min(Math.max(0,"string"==typeof o.discount?parseInt(o.discount):o.discount),99));var i,s,l,r,p,d,c,u,h,m,g,f,y,v,w,b,x,C,T,P,O,I,A=t(this).eq(0),q=A.data("lpp_ns"),F=t.fn.paypal.text,S=(o.id.replace("|","@"),o.curr_symbol[o.currency]||o.currency),R={cart:"shopping-cart",shortcut:"shopping-cart-shortcut",window:"cart-window",cont:"cont",summary:"summary",summaryTxt:"summary-txt",details:"details",newItems:"new-items",items:"items",pricing:"pricing",price:"price",itemTotal:"item-total",itemTotalAmount:"item-total-amount",reduction:"reduction",discountRate:"discount-rate",discountAmount:"discount-amount",total:"total",totalAmount:"total-amount",shipping:"shipping",shippingAmount:"shipping-amount",tax:"tax",taxAmount:"tax-amount",coupon:"coupon",redeem:"redeem",buttons:"buttons",item:"item",path:"path",thumb:"thumb",title:"title",data:"data",options:"options",quantity:"quantity",discount:"discount",amount:"amount"},E={data:"paypal.cart.data",date:"paypal.cart.date",hash:"paypal.cart.hash",settingsHash:"paypal.cart.settingsHash",coupon:"paypal.cart.coupon"},_="paypal.cart.voidCs",M=function(t){return S+" "+t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},N=function(a){var n,e,i={};return(n=a.find("."+R.title)).length&&(i.title=n.text()),(n=a.find("."+R.path)).length&&(i.path=n.val()),(n=a.find("."+R.thumb).eq(0)).length&&(i.file=n.attr("src").getFile()),(n=a.find("."+R.options).eq(0)).length&&("SELECT"===n[0].nodeName?(e=[],n.find("option").each(function(){e.push(t(this).data("val"))}),n[0].selectedIndex>0&&(i.selectedOption=n[0].selectedIndex)):e=n.data("val"),e!==o.options&&(i.options=e)),(n=a.find("."+R.discount)).length&&(i.discountRate=Math.abs(parseFloat(n.text()))),(n=a.find("."+R.quantity)).length&&(i.quantity=parseInt(n.val())||1,(e=n.data("quantityCap"))&&(i.quantityCap=e)),i},L=function(){if(LOCALSTORAGE)for(var t in E)localStorage.removeItem(E[t])},D=function(){return JSON.stringify([o.id,o.currency,o.options]).hashCode()},U=function(a){if(LOCALSTORAGE){var n,e=[];s.find("."+R.item).each(function(){n=N(t(this)),isEmpty(n)||e.push(n)}),e.length?(e=JSON.stringify(e),localStorage.setItem(E.data,e),localStorage.setItem(E.date,(new Date).getTime()),localStorage.setItem(E.hash,e.hashCode()),localStorage.setItem(E.settingsHash,D()),g&&(n=ft())?localStorage.setItem(E.coupon,n):localStorage.removeItem(E.coupon)):L()}t.isFunction(a)&&a.call(this)},k=function(a){if(LOCALSTORAGE){var n,e,i=(new Date).getTime();if(e=localStorage.getItem(E.date)){if(i-parseInt(e)>o.expiry)return void L();localStorage.setItem(E.date,i)}if((e=localStorage.getItem(E.data))&&localStorage.getItem(E.hash)==e.hashCode()&&localStorage.getItem(E.settingsHash)==D()){var s;for(n=JSON.parse(e),s=0;s<n.length;s++)$(d,n[s]);et(!0),s&&gt(localStorage.getItem(E.coupon))}}dt(!0),K(),t.isFunction(a)&&a.call(this)},G=function(a){var n,e={};return a=a.split("="),e.name=t("<textarea>",{html:a[0]}).text(),a.length>1&&(n=a[1].split("+"),e.amount=parseFloat(n[0]),n.length>1&&(e.shipping=parseFloat(n[1])||0,n.length>2?e.shipping2=parseFloat(n[2])||0:e.shipping2=e.shipping)),e},j=function(t){var a=[];t=t.split("::");for(var n=0;n<t.length;++n)a.push(G(t[n]));return a},B=function(t){var a=t.find("."+R.options);return a.length?("SELECT"===a[0].nodeName&&(a=a.find("option:selected")),a.data("val")):(console.log("paypal.js: Can't find shop option!"),null)},H=function(a,n,e,o){var i=t(),s=function(t){return t.name+" = "+M(t.amount)+(t.shipping?" (+"+t.shipping.toFixed(2)+")":"")};if("string"==typeof e&&(e=j(e)),t.isArray(e)&&e.length>1){i=t("<select>",{name:n,class:n}).appendTo(a);for(var l,r=0;r<e.length;r++)l=e[r],i.append(t("<option>",{html:s(l),val:l.amount}).data("val",l));i[0].selectedIndex=o||0}else t.isArray(e)&&(e=e[0]),i=t("<span>",{class:n,html:s(e)}).data("val",e).appendTo(a);return i},Q=function(a,n,e){e&&a.append(t("<img>",{class:R.thumb,src:e})),a.append(t("<span>",{class:R.title,html:n}))},W=function(a,n,e,o,i){if(!a||!n)return{};var s=t("<input>",{type:o||"text"}).appendTo(a);return s.prop("name",n).addClass(n),e&&s.val("string"==typeof e?e.stripQuote():e),i&&s.prop(i,!0),s},$=function(a,e){if(r.find("."+R.item).length>=99)return n.modal(t("<div>",{html:F.noMoreItems}),{autoFade:3e3,class:"warning small"}),-1;var i,s,l=t("<form>",{name:R.item,class:R.item+" clearfix",method:"post"});if(l.on("submit",function(a){return a.preventDefault(),t(this).trigger("update"),!1}),(s=t("<a>",{class:"button icon-cancel"}).appendTo(l)).on("click."+q,function(){t(this).parents("form").eq(0).remove(),dt()}),e.hasOwnProperty("path")&&e.hasOwnProperty("title")&&e.hasOwnProperty("options")){W(l,R.path,e.path,"hidden"),Q(l,e.title,(e.path?getRelativePath(o.relPath,e.path):o.rootPath+"/")+o.thumbsFolder+e.file),i=t("<div>",{class:R.data}).appendTo(l),(s=H(i,R.options,e.options,e.selectedOption)).on("change",function(){t(this).parents("form").eq(0).trigger("update")}),i.append("&times;");var p=e.hasOwnProperty("quantityCap")?e.quantityCap:o.quantityCap;if(s=W(i,R.quantity,p?Math.min(p,e.quantity||1):e.quantity||1),e.hasOwnProperty("quantityCap")&&e.quantityCap>0&&s.data("quantityCap",e.quantityCap),!e.hasOwnProperty("quantityCap")&&1!==o.quantityCap||1!==e.quantityCap?s.on("change",function(){var a=t(this),e=t(this).data("quantityCap");typeof e===UNDEF&&(e=o.quantityCap),e>0&&parseInt(a.val())>e&&(n.modal(t("<div>",{html:F.maxNItems.replace("{0}",e)}),{autoFade:3e3,class:"warning small"}),a.val(e)),a.parents("form").eq(0).trigger("update")}):s.prop("disabled","disabled"),e.hasOwnProperty("discountRate")&&e.discountRate>0&&e.discountRate<=99&&i.append(t("<span>",{class:R.discount,text:"-"+e.discountRate+"%"})),i.append("="),i.append(t("<span>",{class:R.amount})),l.on("update."+q,function(){at(t(this)),dt()}),null!==at(l))return a.append(l),l;console.log("paypal.js: Calculation error! Item skipped.")}else console.log('paypal.js: Can\'t add item. Required parameter "path", "title" or "options" missing.');return null},V=function(t){var a,n={},o=e.getPropertyObject(t,J.SHOP,!0);return o&&o.hasOwnProperty("options")&&"-"!==o.options&&(n={title:t[J.TITLE]||t[J.NAME]||"",path:e.getFolderPath(t),file:t[J.NAME],options:j(o.options)},o.hasOwnProperty("discountRate")&&(a=parseInt(o.discountRate))>0&&a<100&&(n.discountRate=a),o.hasOwnProperty("tax")&&(a=parseFloat(o.tax))>0&&(n.tax=a),o.hasOwnProperty("quantityCap")&&(a=parseInt(o.quantityCap))>0&&(n.quantityCap=a)),n},Y=function(a){if(a&&a.length){if(t.isArray(a)){a.length>1&&tt();for(var n=0;n<a.length&&-1!==$(c,V(a[n]));n++);}else $(c,V(a));dt(),Pt()}},z=function(){var a=0;return r.find("."+R.item).each(function(){a+=parseInt(t(this).find("."+R.quantity).val(),10)||1}),a},K=function(){var a=d.find("."+R.item),n=p.find("."+R.summaryTxt),e=a.length;if(n.empty(),e){for(var o=0;o<3&&!(o>=e);o++)n.append(t("<img>",{src:a.eq(o).find("img."+R.thumb).attr("src")}));e>3&&n.append(" +"+(e-3)+" "+F[e>4?"items":"item"]),d.hide(),p.show()}else p.hide()},X=function(){d.is(":hidden")&&(tt(),p.hide(),d.fadeIn(400))},Z=function(){return r.find("."+R.item).length},tt=function(){c.find("."+R.item).each(function(){t(this).appendTo(d)}),c.empty().hide(),K()},at=function(t){var a,n,e,o=B(t),i=1,s=0;return o&&o.amount?((n=t.find("."+R.quantity)).length&&(i=parseInt(n.val(),10)||1),e=o.amount*i,(n=t.find("."+R.discount)).length&&(a=Math.abs(parseFloat(n.text())))&&(e*=1-a/100),t.data("amount",e),o.shipping&&(s+=o.shipping),o.shipping2&&i>1&&(s+=(i-1)*o.shipping2),t.data("shipping",s),t.find("."+R.amount).html(M(e))):console.log("paypal.js: Calculation error!"),e},nt=function(){var a,n,e=0,o=0;return r.find("."+R.item).each(function(){typeof(a=t(this).data("amount"))===UNDEF&&(a=at(t(this))),n=t(this).data("shipping"),e+=a,o+=n}),u.data("val",e),v.data("aggregate",o),e},et=function(t){var a=u.data("val");return(t||typeof a===UNDEF)&&(a=nt()),a},ot=function(a){var e=0,i=z(),s=et(a),l=v.data("aggregate")||0,r=o.handling||0;return h.html(M(s)),m&&((e=y.data("qmin"))&&e>i?(e=0,yt()?(n.modal(t("<div>",{html:F.couponRemoved+" "+F.addMoreItems.replace("{0}",e-i)}),{autoFade:3e3,class:"warning small"}),ht()):lt(!1)):(e=y.data("amin"))&&e>s?(e=0,yt()?(n.modal(t("<div>",{html:F.couponRemoved+" "+F.validAbove.replace("{0}",M(e))}),{autoFade:3e3,class:"warning small"}),ht()):lt(!1)):f&&(e=f.data("val"))&&e>0?(e=s*e/100,y.data("val",e).html(M(e)),lt(!0)):(e=y.data("val"))&&e>0?(f&&f.hide(),e>s?(n.modal(t("<div>",{html:F.couponRemoved+" "+F.amountLowerThan.replace("{0}",M(e))}),{autoFade:3e3,class:"warning small"}),e=0,ht()):lt()):lt(!1)),r||l>0?(v.show().data("val",Math.max(0,r+l)),w.html(M(r+l))):v.hide(),s+=r+l-e,x.data("netval",s),o.tax&&(T.html(M(s*o.tax/100)),s+=s*o.tax/100),x.html(M(s)),s},it=function(){return f.data("val")||0},st=function(t){if(m)if(typeof t!==UNDEF){var a=et()*t/100;f.data("val",t).text("-"+t+"%").toggle(t>0),y.data("val",a).html(M(a)),lt(t>0)}else g&&(g.val(""),LOCALSTORAGE&&localStorage.removeItem(E.coupon),i=null),f.data("val",0).empty().hide(),y.data("val",0).html(M(0)),lt(!1)},lt=function(t){m.find("."+R.data).toggle(typeof t===UNDEF||t)},rt=function(){if(o.hasOwnProperty("discount")&&o.discount>0&&o.discount<100){var t=0,a=0,n=et();if(f.data("val",o.discount).text("-"+o.discount+"%"),o.hasOwnProperty("discountMinQuantity")&&o.discountMinQuantity>0&&(y.data("qmin",o.discountMinQuantity),a=o.discountMinQuantity),o.hasOwnProperty("discountMinAmount")&&o.discountMinAmount>0&&(y.data("amin",o.discountMinAmount),t=o.discountMinAmount),a&&z()<a||t&&n<t)f.hide(),y.data("val",0).html(M(0)),lt(!1);else{var e=n*o.discount/100;f.show(),y.data("val",e).html(M(e)),lt(e>0)}}else m&&(g&&(g.val(""),LOCALSTORAGE&&localStorage.removeItem(E.coupon),i=null),f&&f.data("val",0).empty().hide(),y.data("val",0).html(M(0)),lt(!1))},pt=function(t){if(m){var a=Math.min(et(),t);f&&f.data("val",0).empty().hide(),y.data("val",a).html(M(a)),lt(a>0)}},dt=function(t){var a=Z();c.toggle(!c.is(":empty")),p.toggle(!(d.is(":empty")||d.is(":visible"))),P.add(O).toggleClass("disabled",0===a),t&&!yt()&&rt(),ot(!0),ct(a),!s.is(":visible")&&a&&I.fadeIn(400),t||U()},ct=function(t){t=typeof t===UNDEF?Z():t,I.find(".button").text(" "+F.viewCart+(t>0?" ("+t+")":""))},ut=function(){g&&(i&&i.hasOwnProperty("code")?g.val(i.code):g.val(""))},ht=function(){g&&(g.val(""),i={},rt())},mt=function(){var t;g&&(t=ft())?((i={}).code=t,(t=f.data("val"))&&(i.rate=t),(t=y.data("val"))&&(i.amount=t),(t=y.data("qmin"))&&(i.qmin=t),(t=y.data("amin"))&&(i.amin=t)):i=null},gt=function(t){t&&t.length&&g&&(g.val(t),bt(!1))},ft=function(){return g?g.val().trim():""},yt=function(){return g&&g.val().trim().length>0},vt=function(t){if(LOCALSTORAGE){var a=localStorage.getItem(_);if(a&&a.length){if(!t||t==a||a.indexOf("::")&&a.match(new RegExp("^"+t+"::|::"+t+"::|::"+t+"$")))return;localStorage.setItem(_,a+"::"+t)}else t&&localStorage.setItem(_,t)}},wt=function(t){if(LOCALSTORAGE){var a=localStorage.getItem(_);return a&&(t==a||a.indexOf("::")&&a.match(new RegExp("^"+t+"::|::"+t+"::|::"+t+"$")))}return!1},bt=function(a){var e;if(g&&(e=ft())){if(i&&i.hasOwnProperty("code")&&i.code===e)return!0;for(var s,l,r,p,d,c,u=new Date,h=et(),m=z(),f=xDecrypt(o.coupons).split("::"),v=0;v<f.length;v++)if((s=f[v].split(/=|\s/))[0]===e&&s.length>1){if("NaN"==typeof(l=parseFloat(s[1]))||l<.01)continue;r="%"===s[1].charAt(s[1].length-1),p=0,d=0,c=0;for(var w=2;w<s.length;w++)s[w].match(/<\d+([-|\:|\/]\d+[-|\:|\/]\d+[-|\:|\/])*/)?p=function(t){var a=t.split(/-|:|\//);return a.length<2&&(a[1]=1),a.length<3&&(a[2]=1),new Date(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]))}(s[w].substring(1)):s[w].match(/\d+\.\d+\+/)?c=parseFloat(s[w]):s[w].match(/\d+\+/)&&(d=parseInt(s[w],10)||0);if(p&&p<u)a?n.modal(t("<div>",{html:F.expired.replace("{0}",e)}),{autoFade:3e3,class:"alert small"}):console.log('Coupon "'+e+'" has expired!'),ut();else if(c&&h<c)a?n.modal(t("<div>",{html:F.minAmountWarning.replace("{0}",M(c))}),{autoFade:3e3,class:"warning small"}):console.log('Coupon "'+e+'" can only be used if the item total amount is at least '+M(c)),ut();else if(d&&m<d)a?n.modal(t("<div>",{html:F.minQuantityWarning.replace("{0}",d)}),{autoFade:3e3,class:"warning small"}):console.log('Coupon "'+e+'" can only be used if there is at least '+d+" items in the cart!"),ut();else if(r){if(l>99||l<1)continue;(b=it())>l?(a?n.modal(t("<div>",{html:F.lowerThanCurrent.replace("{0}",b+"%")}),{autoFade:3e3,class:"warning small"}):console.log('Coupon "'+e+'" provides lower discount than current!'),ut()):(a&&n.modal(t("<div>",{html:F.couponAccepted.replace("{0}",l+"%")}),{autoFade:3e3,title:F.success,class:"success small"}),st(l),y.data({amin:c,qmin:d}),mt(),dt())}else if(wt(e))a?n.modal(t("<div>",{html:F.reclaimed}),{autoFade:3e3,class:"warning small"}):console.log('Coupon "'+e+'" has been reclaimed previously.'),ut();else{var b=it(),x=b>0?h*b/100:0;h<l?(a?n.modal(t("<div>",{html:F.higherThanTotal.replace("{0}",M(l))}),{autoFade:3e3,class:"warning small"}):console.log('Coupon "'+e+'" provides higher discount that the total amount!'),ut()):x>l?(a?n.modal(t("<div>",{html:F.lowerThanCurrent.replace("{0}",M(x))}),{autoFade:3e3,class:"warning small"}):console.log('Coupon "'+e+'" offers less discount than the current!'),pt(l),y.data({amin:c,qmin:d}),mt(),dt()):(a&&n.modal(t("<div>",{html:F.couponAccepted.replace("{0}",M(l))}),{autoFade:3e3,title:F.success,class:"success small"}),pt(l),y.data({amin:c,qmin:d}),mt(),dt())}return!0}return n.modal(t("<div>",{html:F.noSuch}),{autoFade:3e3,class:"alert small"}),ut(),!1}return!0},xt=function(t){var a,n,e={};return(a=t.find("."+R.title)).length&&(e.title=a.text()),(a=t.find("."+R.path)).length&&(e.path=a.val()),(n=B(t))&&(n.hasOwnProperty("name")&&(e.option=n.name),n.hasOwnProperty("amount")&&(e.amount=n.amount),n.hasOwnProperty("shipping")&&(e.shipping=n.shipping),n.hasOwnProperty("shipping2")&&(e.shipping2=n.shipping2)),(a=t.find("."+R.quantity)).length&&(e.quantity=a.val()),(a=t.find("."+R.discount)).length&&(e.discount=Math.abs(parseInt(a.text(),10))),(a=t.find("."+R.tax)).length&&(e.tax=a.val()),e},Ct=function(){var n=t("<form>",{class:"hide",method:"post",action:(DEBUG?o.sandboxurl:o.url)+"cgi-bin/webscr"}).appendTo(r),e=r.find("."+R.item),i=function(a,e){n.append(t("<input>",{type:"hidden",name:a,val:e}))};if(e.length||(buyNow.addClass("disabled"),retuMolnar.lacarn),o.sameWindowCheckout||n.attr("target",o.target),i("cmd","_cart"),i("charset","utf-8"),i("lc",o.locale),i("upload","1"),i("business",o.id.replace("|","@")),i("currency_code",o.currency),o.hasOwnProperty("successUrl")&&i("return",o.successUrl.fixjAlbumPaths(o.resPath,o.rootPath,o.relPath)),o.hasOwnProperty("handling")&&o.handling>0&&i("handling_cart",o.handling),e.each(function(a){var n=xt(t(this)),e=String(a+1);i("item_name_"+e,(n.path?"("+n.path+") ":"")+n.title+" :: "+n.option),n.hasOwnProperty("discount")&&n.discount>0?i("amount_"+e,(n.amount*(1-n.discount/100)).toFixed(2)):i("amount_"+e,n.amount.toFixed(2)),n.hasOwnProperty("quantity")&&n.quantity>1&&i("quantity_"+e,n.quantity),n.hasOwnProperty("shipping")&&n.shipping>0&&(i("shipping_"+e,n.shipping),n.hasOwnProperty("shipping2")?n.shipping2>0&&i("shipping2_"+e,n.shipping2):i("shipping2_"+e,n.shipping)),n.hasOwnProperty("tax")&&n.tax>0&&i("tax_"+e,n.tax)}),n.append(t("<input>",{type:"submit",val:"PayPal"})),!m||bt(!1)){if(m){var s=f.data("val");if(s){var l=et(),p=y.data("amin"),d=z(),c=y.data("qmin");(!p&&!c||!c&&l>=p||!p&&d>=c||l>=p&&d>=c)&&i("discount_rate_cart",s)}else(s=y.data("val"))&&(i("discount_amount_cart",s),g&&vt(g.find("input").val()))}if(o.tax>0){var u=x.data("netval");u&&o.tax&&i("tax_cart",(u*o.tax/100).toFixed(2))}if(DEBUG&&console.log((n.html()+"").replace(/></g,">\n<")),!o.sameWindowCheckout){var h=Math.min(a.width()-80,1024),v=Math.min(a.height()-80,800);window.open("",o.target,"width="+h+",height="+v+",left=40,top=40,location=no,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no")}n.trigger("submit"),e.remove(),dt(),Ot()}},Tt=function(){n.modal(t("<h3>",{class:"text-center icon-warning",html:" "+F.removeAllItems}),[{t:F.yes,c:"alert icon-trash",h:function(){r.find(".item").remove(),dt(),Ot()}},{t:F.no,h:function(){}}],{class:"alert small"})},Pt=function(a){s.is(":visible")||(n.addClass("no-scroll"),n.addClass("has-modal"),s.fadeIn(400,function(){t.isFunction(a)&&a.call(this)})),I.fadeOut()},Ot=function(a){var n=z();s.is(":visible")&&(t("body,html").removeClass("no-scroll"),t("body").removeClass("has-modal"),s.fadeOut(400,function(){n>=0&&I.fadeIn(400),t.isFunction(a)&&a.call(this)}))};return o.hasOwnProperty("options")||(o.options=e.getRootProperty("shopOptionsGlobal")),"string"==typeof o.options&&(o.options=j(o.options)),function(a){void 0!==q&&(t(l).off("."+q),t("#cart_"+q).remove(),t("#cart_shortcut_"+q).remove()),A.data("lpp_ns",q="lpp_"+Math.floor(1e4*Math.random())),s=t("<div>",{id:"cart_"+q,class:"modal "+R.cart,role:"modal"}).hide().appendTo(n),o.useFloatButton&&(I=t("<div>",{id:"cart_shortcut_"+q,class:R.shortcut}).hide().append(t("<a>",{class:"small button icon-shopping-cart"}).on("click."+q,Pt)).appendTo(A)),(l=t("<div>",{class:"window has-header "+R.window,role:"dialog"}).appendTo(s)).append(t("<header>",{class:"icon-shopping-cart",html:"<strong> "+F.shoppingCart+"</strong>"})),l.append(t("<a>",{class:"btn close"}).on("click."+q,Ot)),s.on("click."+q,function(t){return t.target.id!=="cart_"+q||(Ot(),!1)}),r=t("<div>",{class:"content"}).appendTo(l),(p=t("<div>",{class:R.summary+" clearfix"}).hide().appendTo(r)).append(t("<div>",{class:R.summaryTxt})),p.append(t("<a>",{class:"details-btn icon-drop-down",text:" "+F.edit}).on("click."+q,X)),d=t("<div>",{class:R.details+" "+R.items}).hide().appendTo(r),c=t("<div>",{class:R.newItems+" "+R.items}).appendTo(r);var e=t("<div>",{class:R.pricing}).appendTo(r);if(u=t("<div>",{class:R.itemTotal,text:F.subtotal+": "}).appendTo(e),h=t("<span>",{class:R.itemTotalAmount+" "+R.amount}).appendTo(u),o.coupons||o.discount){if(m=t("<div>",{class:R.reduction+" clearfix"}).appendTo(e),o.coupons){var i=t("<form>",{class:R.coupon}).appendTo(m);i.append(t("<a>",{class:"button icon-cancel"}).on("click."+q,function(){ht(),dt()})),g=t("<input>",{type:"text",placeholder:F.couponCode}).appendTo(i),i.append(t("<a>",{class:"secondary button icon-refresh"}).on("click",function(){bt(!0)})),i.on("submit",function(){return bt(!0),!1}),g.on("blur",function(){bt(!0)}),g.prev().addTooltip(F.remove)}m.append(t("<div>",{class:R.data,text:F.discount}).append(f=t("<span>",{class:R.discount+" "+R.discountRate})).append(": &ndash;").append(y=t("<span>",{class:R.discountAmount+" "+R.amount})))}v=t("<div>",{class:R.shipping,text:F.shippingAndHandling+": +"}).appendTo(e),w=t("<span>",{class:R.shippingAmount+" "+R.amount}).appendTo(v),o.tax&&(C=t("<div>",{class:R.tax,text:F.tax+" ("+o.tax+"%): +"}).appendTo(e),T=t("<span>",{class:R.taxAmount+" "+R.amount}).appendTo(C)),b=t("<div>",{class:R.total,text:F.total+": "}).appendTo(e),x=t("<span>",{class:R.totalAmount+" "+R.amount}).appendTo(b);var S=t("<div>",{class:R.buttons}).appendTo(r);S.append(t("<a>",{class:"secondary button icon-arrow-left",text:" "+F.continueShopping}).on("click."+q,Ot)),O=t("<a>",{class:"alert button icon-trash",text:" "+F.emptyCart}).on("click."+q,Tt).appendTo(S),P=t("<a>",{class:"disabled button icon-paypal",html:" "+F.buyNow}).on("click."+q,Ct).appendTo(S),S.append(t("<p>",{class:"fineprint",text:F.processedByPaypal})),o.hasOwnProperty("instructions")&&r.append(t("<div>",{class:"instructions icon-info"}).append(t("<div>").append(o.instructions.fixjAlbumPaths(o.resPath,o.rootPath,o.relPath)))),rt(),l.find("a.close").addTooltip(F.continueShopping),k()}(),A.on("addItems",function(t){var a=Array.prototype.slice.call(arguments,1);Y(a)}).on("emptyCart",Tt).on("showCart",Pt).on("hideCart",Ot),o.hasOwnProperty("onReady")&&o.onReady(this),this},t.fn.paypal.defaults={currency:"EUR",locale:"US",quantityCap:0,expiry:36e5,shippingFlat:!1,sameWindowChekout:!1,useFloatButton:!0,target:"BuyNow",rootPath:"",relPath:"",thumbsFolder:"thumbs/",url:"https://www.paypal.com/",sandboxurl:"https://www.sandbox.paypal.com/",curr_symbol:{USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",HUF:"Ft"}},t.fn.paypal.text=getTranslations({addCart:"Add to Cart",shoppingCart:"Shopping cart",edit:"Edit",continueShopping:"Continue shopping",buyNow:"Buy Now",closeWindow:"Close window",viewCart:"View Cart",emptyCart:"Empty Cart",removeAllItems:"Remove all items?",yes:"Yes",no:"No",processedByPaypal:"Payment processed by PayPal",item:"item",items:"items",success:"Success",couponCode:"Coupon code",redeem:"Redeem",noSuch:"No such coupon exists!",expired:"The coupon code <b>{0}</b> has expired!",lowerThanCurrent:"This coupon offers lower discount than the current <b>{0}</b>.",reclaimed:"This coupon has already been used!",subtotal:"Subtotal",shippingAndHandling:"Shipping and handling",reduction:"Reduction",discount:"Discount",total:"Total",tax:"Tax",remove:"Remove",couponAccepted:"Coupon code accepted, discounting <b>{0}</b>.",couponRemoved:"Coupon has been removed.",amountLowerThan:"The amount is lower than the discount <b>{0}</b>.",addMoreItems:"Add {0} more item(s) to use this coupon!",validAbove:"Valid only above {0} cart value.",higherThanTotal:"Coupon provides higher discount (<b>{0}</b>) than the cart total.",minAmountWarning:"This coupon can only be used if the total amount exceeds <b>{0}</b>.",minQuantityWarning:"This coupon can only be used if the number of items exceeds <b>{0}</b>.",maxNItems:"Maximum <b>{0}</b> items allowed!"})}(jQuery,$(window),$("body"));
!function(e,a,t,s,n){"use strict";e.fn.selectable=function(a){a=e.extend({cardClass:"card",checkboxClass:"checkbox",checkedClass:"checked",noneSelected:null,anySelected:null},a);var t,s=e(this).eq(0),n=function(){return t.filter("."+a.checkedClass).length},o=function(){return a.selector?s.find(a.selector):s.find("."+a.cardClass)},l=function(t){var s=e(t.target).closest("."+a.cardClass),o=n();return s.hasClass(a.checkedClass)?(s.removeClass(a.checkedClass),1===o&&e.isFunction(a.noneSelected)&&a.noneSelected.call()):(s.addClass(a.checkedClass),0===o&&e.isFunction(a.anySelected)&&a.anySelected.call()),!1},r=function(){if(s.is(":visible")){var o=n();o<t.length&&(t.not("."+a.checkedClass).addClass(a.checkedClass),0===o&&e.isFunction(a.anySelected)&&a.anySelected.call())}},i=function(){if(s.is(":visible")){var o=n();o&&(t.filter("."+a.checkedClass).removeClass(a.checkedClass),o>0&&e.isFunction(a.noneSelected)&&a.noneSelected.call())}},c=function(){if(s.is(":visible")){var o=n();t.toggleClass(a.checkedClass),0===o&&e.isFunction(a.anySelected)?a.anySelected.call():o===t.length&&e.isFunction(a.noneSelected)&&a.noneSelected.call()}},d=function(){(t=o()).each(function(){e(this).children("span."+a.checkboxClass).length||e(this).append(e("<span>",{class:a.checkboxClass}).on({click:l}))})};return d(),s.on({selectAll:r,selectNone:i,selectInverse:c,selectRefresh:d}),this},e.fn.skin=function(t){t=e.extend({},e.fn.skin.defaults,t);var n,o,l,r=e(t.contentHook),i=getTranslations({foundNTimes:"found {0} time(s)",notFound:"not found",search:"Search",newImages:"New images",label:"Label",addCart:"Add to cart",return:"return",inTheLastDay:"in the last day",inThePastNDays:"in the past {0} days",sinceMyLastVisit:"since my last visit",imagesAdded:"Images added",imagesModified:"Images modified",imagesTaken:"Images taken",cookiePolicyText:"This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.",cookiePolicyAgree:"Got it",cookiePolicyLearnMore:"Learn more",newItem:"NEW",more:"more",less:"less"}),c="",d=""!==window.location.hash,h=new Date/864e5,u=function(a,t){var s=e("<div>",{class:"large-12 columns cont-box"}).prependTo(a);return s=e("<header>",{class:t&&t.hasOwnProperty("icon")?t.icon:""}).appendTo(s),t&&t.hasOwnProperty("title")&&s.append(e("<h4>",{html:t.title})),s.append(e("<a>",{class:"close",href:"",text:i.return}).on("click",function(){return g(),!1})),s},f=function(a){return a=e("<div>",{class:"large-12 columns"}).appendTo(a),a=e("<div>",{class:t.thumbsClass+" row "+t.thumbGridClass}).appendTo(a)},m=function(a){var s;r.addClass("has-overlay").children("section."+t.thumbContClass).each(function(){this.hasOwnProperty("overlay")?p(e(this)):s=e(this).hide()});var n="ths_"+Math.floor(1e4*Math.random()),o=e("<section>",{class:"row overlay "+t.thumbContClass+" "+a.className,id:n}).data("oly_ns",n).insertAfter(s);return o[0].overlay=n,u(o,a),f(o),o},p=function(e){var s=e.data("oly_ns");s&&a.off("."+s),e.closest("."+t.thumbsClass).trigger("lightboxRemove"),e.remove()},g=function(){return r.removeClass("has-overlay").children("section."+t.thumbContClass).each(function(){this.hasOwnProperty("overlay")?p(e(this)):e(this).show().find("."+t.thumbsClass).trigger("refresh")}),removeParam(t.indexName),j(),e("#selectall").toggleClass("disabled",0===e("section."+t.thumbContClass+" ."+t.cardClass).length),e("#selectnone, #add-selected").addClass("disabled"),null},C=function(){var a=r.children("section."+t.thumbContClass+":visible").eq(0);if(a.length||(a=e("<section>",{class:"row "+t.thumbContClass}).appendTo(r),f(a)),!a.data("oly_ns")){var s="oly_"+ +Math.floor(1e4*Math.random());a.data("oly_ns",s).attr("id",s)}return a},b=function(e){return r.find("section."+t.folderContClass+(e?" "+e:""))},v=function(e){return r.find("section."+t.thumbContClass+":visible ."+t.thumbsClass+" "+(e||""))},y=function(a){var s=e();return v("."+t.thumbClass).each(function(){var t=e(this).attr("href")||e(this).data("href");if(t&&t.endsWith("/"+a))return s=e(this).parent(),!1}),s},w=function(a){var s=[];return v("."+t.thumbClass+"."+t.checkedClass).each(function(){a&&e(this).removeClass(t.checkedClass),s.push(e(this).closest("."+t.cardClass).data(J.OBJ))}),s},k=function(){var a=[];return v("."+t.thumbClass).each(function(){a.push(e(this).closest("."+t.cardClass).data(J.OBJ))}),a},x=function(a){var s=a.children("a[data-thumb]").eq(0);s.children("img").length||s.append(e("<img>",{alt:s.data("alt"),class:"hide-image"}).one("load",function(){a.removeClass(t.lazyloadClass),e(this).addClass("show-image").removeClass("hide-image"),b().trigger("refresh",e(this))}).attr("src",s.data("thumb")+l))},P=function(){var s=b("."+t.lazyloadClass);if(s.length){var n=a.height(),o=a.scrollTop();s.each(function(){var a=e(this),t=a.offset().top,s=a.height();if(t<o+n&&t+s>o&&x(a),t>o+n)return!1})}};e.fn.renderThumbs=function(s,r,c,d){if(typeof s===UNDEF||!s.length||!e.isArray(s))return this;var u=e(this).eq(0),m=u.closest("section").data("oly_ns"),p=null,g=function(){var a=u.find("."+t.thumbsClass);return a.length||(a=e("<section>",{class:"row "+t.thumbContClass}).appendTo(u),a=f(a)),a}(),C=function(){if(g.is(":visible")){var s=v("."+t.lazyloadClass),n=a.height(),o=a.scrollTop();s.not(":empty").each(function(){var a=e(this),s=a.offset().top,l=a.height();if(s<o+n&&s+l>o-30&&(a.removeClass(t.lazyloadClass),y(a)),s>o+n)return!1})}},b=function(a){return!("A"!==a.target.id||!e(a.target).closest("."+t.commentClass).length)||(g.trigger("lightboxLoad",v("."+t.cardClass).index(e(a.currentTarget).parent())),!1)},y=function(a){if(a.length){var s=a.children("."+t.thumbClass).eq(0);s.children("img").length||s.append(e("<img>",{class:"hide-image"}).one("load",function(){e(this).addClass("show-image").removeClass("hide-image"),v().trigger("refresh",this)}).attr("src",o.getThumbPath(a.data(J.OBJ))+l))}},w=function(s,n){if(n){var o=e(n),l=a.height(),r=a.scrollTop(),i=o.offset().top,c=o.outerHeight();g.find("."+t.activeClass).removeClass(t.activeClass),o.addClass(t.activeClass),i+c>r+l?e("html, body").stop(!0,!1).animate({scrollTop:Math.round(i-l+c+30)+"px"}):i<r&&e("html, body").stop(!0,!1).animate({scrollTop:Math.round(Math.max(i-30,0))+"px"})}};return m||e(this).closest("section").data("oly_ns",m="oly_"+Math.floor(1e4*Math.random())),u.append(e("<div>",{class:"progressbar"})),function(){for(var a,l,r,c,d,u=v("."+t.cardClass),f=(new Date,0);f<s.length;f++)d=s[f],f<u.length?(l=(a=u.eq(f)).children("."+t.thumbClass),r=a.find("."+t.captionClass)):(a=e("<div>",{class:t.cardClass+" "+t.lazyloadClass}).append(l=e("<a>",{class:t.thumbClass+" "+t.verticalMiddleClass}).data("href",o.getItemPath(d))).appendTo(e("<div>",{class:"column"}).appendTo(g)),(c=d[J.THUMBCAPTION])&&(a.addClass(t.hascaptionClass),r=e("<div>",{class:t.captionClass,html:c}),t.captionTooltip&&r.append('<b class="nub"></b>'),t.captionAbove?a.prepend(r):a.append(r))),a.data(J.OBJ,d),o.isLightboxable(d)?(a.addClass(t.lbableClass),l.on("click."+m,b),n&&o.hasShop(d)&&l.addClass("selectable").append(e("<a>",{class:"icon-shopping-cart add-cart",text:" "+i.addCart}).on("click."+m,function(a){var s=e(a.target).closest("."+t.cardClass);return s.length&&n.trigger("addItems",s.data(J.OBJ)),!1}))):(a.addClass(d[J.CATEGORY]),l.attr("href",o.getItemPath(d))),t.markNew&&d.hasOwnProperty(J.MODIFIEDDAYS)&&h-d[J.MODIFIEDDAYS]<t.markNew&&l.append(e("<span>",{class:"icon-star new-image"}).data("tooltip",new Date(864e5*d[J.MODIFIEDDAYS]).toLocaleDateString()).addTooltip()),t.rightClickProtect&&l.on("contextmenu",function(e){return e.preventDefault(),!1})}(),a.on("scroll."+m+" resize."+m,function(e){return clearTimeout(p),p=setTimeout(C,t.scrollCheckInterval),!0}),v().matchHeight({delegate:t.cardClass,match:t.captionAbove?[t.captionClass,t.thumbClass,t.cardClass]:[t.thumbClass,t.cardClass]}),C(),u.on("setactivethumb",w),e.isFunction(r)&&(typeof c!==UNDEF?typeof d!==UNDEF?r.call(void 0,g,c,d):r.call(void 0,g,c):r.call(void 0,g)),u.find(".progressbar").remove(),this};var T=function(s,n){var l=m({className:"tags-found",icon:"icon-label",title:"&ldquo;"+s+"&rdquo;"}),r=l.find("header h4");r.append(e("<span>",{class:"progressbar"})),(l.offset().top<a.scrollTop()||l.offset().top>a.scrollTop()+a.height()-100)&&a.scrollTop(l.offset().top),o.collectItems(e.extend(t.tagCloud,{exact:t.exactFields,terms:s,ready:function(){r.find(".progressbar").remove(),r.append(e("<small>",{text:this.length?i.foundNTimes.replace("{0}",this.length):i.notFound})),l.renderThumbs(this,E),n&&n.call()}}))},N=function(a){if(a.length){var s=e(t.tagCloud.hook);if(s.length){for(var n,o,l,r=function(){var a=e(this).children("span").eq(0).text();return a&&a.length>1&&T(a,function(){setParam(t.indexName,{label:a},i.label+": "+a),j()}),!1},c=0,d=a.length;c<d;c++){if((n=e("<a>",{class:"tag"}).append(e("<span>",{text:a[c][0]}))).on("click",r),a[c][1]>1){if(t.tagCloud.fontVaries){for(o=0,l=Math.min(64,a[c][1]);l>1;)o++,l>>=1;n.addClass("size-"+o)}n.append("&nbsp;").append(e("<sup>",{text:a[c][1]}))}s.append(n)}if(a.length){var h;s.outerHeight()>175&&(s.css({maxHeight:150,overflow:"hidden"}),(h=e("<div>",{class:"toggle-height"})).append(e("<a>",{class:"icon-drop-down",text:" "+i.more}).on("click",function(){var e=s.parent(),a=function(){var a=s.prop("scrollHeight");e.css({height:"auto",overflow:"visible"}),s.css({maxHeight:150}),setTimeout(function(){s.css({maxHeight:a+20})},25),h.addClass(t.activeClass)};e.css({height:e.height(),overflow:"hidden"}),s.css({maxHeight:"none"}),setTimeout(a,50)})).append(e("<a>",{class:"icon-drop-up",text:" "+i.less}).on("click",function(){s.css({maxHeight:150}),h.removeClass(t.activeClass)})),s.after(h))}}}},O=function(){var a=function(s){if(s.hasOwnProperty(J.FOLDERS)&&s[J.FOLDERS].length){var n,l,r,i,c=s[J.FOLDERS];for(n=e("<ul>"),r=0;r<c.length;r++)i=o.getRelativeFolderPath(c[r]),(l=e("<li>").appendTo(n)).append(e("<a>",{href:(i?i+"/":"")+t.indexName,html:c[r][J.TITLE]||c[r][J.NAME]||""})).append(a(c[r])),i||l.addClass("actual");return n}return e()};if("tree"===t.folderTree.type)return t.level>0?function(){var a=t.rootPath;return e("<a>",{class:"home-link icon-home",href:(a?a+"/":"")+t.indexName,text:" "+o.getAlbumTitle()})}().add(a(o.getTree())):a(o.getTree());a(o.getCurrentFolder())},D=function(a,s){var n=m({className:"search-results",icon:"icon-search",title:"&ldquo;"+a+"&rdquo;"}),l=n.find("header h4");l.append(e("<span>",{class:"progressbar"})),setTimeout(function(){o.collectItems(e.extend(t.search,{exact:!1,terms:a,ready:function(){l.find(".progressbar").remove(),l.append(e("<small>",{text:this.length?i.foundNTimes.replace("{0}",this.length):i.notFound})),n.renderThumbs(this,E),s&&s.call()}}))},50)},M=function(a){if(a.length){t.search=e.extend({depth:"tree",fields:"creator,keywords,title,comment"},t.search);var s=function(e){var a=e.find("input").eq(0).val();return a&&a.length>1&&D(a,function(){setParam(t.indexName,{search:a},i.search+": "+a),j()}),!1};a.find(".search-btn, button").on("click",function(){return a.hasClass(t.activeClass)?(s(a),a.removeClass(t.activeClass)):(a.find("input").eq(0).focus(),a.addClass(t.activeClass)),!1}),a.on("submit",function(e){return e.preventDefault(),s(a),a.removeClass(t.activeClass),!1}),a.find("input").on({focus:function(){a.addClass(t.activeClass)}})}},S=function(){var a=e(t.tagCloud.searchHook);if(a.length){var s=function(e){var a=e.find("input").eq(0).val();return a&&a.length>1&&T(a,function(){setParam(t.indexName,{label:a},i.label+": "+a),j()}),!1};a.find(".search-btn, button").on("click",function(){return a.find("input").eq(0).focus(),s(a),!1}),a.on("submit",function(e){return e.preventDefault(),s(a),!1})}},I=function(e){return"dateTaken"==e?i.imagesTaken:"fileModified"==e?i.imagesModified:i.imagesAdded},F=function(a,s){var n=m({className:"search-results",icon:"icon-star",title:I(t.searchNew.reference)+" "+getTimespan(a)}),l=n.find("header h4");l.append(e("<span>",{class:"progressbar"})),setTimeout(function(){o.collectByDate(e.extend(t.searchNew,{range:a,ready:function(){l.find(".progressbar").remove(),l.append(e("<small>",{text:this.length?i.foundNTimes.replace("{0}",this.length):i.notFound})),n.renderThumbs(this,E),s&&s.call()}}))},50)},L=function(e){return e&&F(e,function(){setParam(t.indexName,{newimages:e},I(t.searchNew.reference)+" "+getTimespan(e)),j()}),!1},A=function(a){if(a.length){t.searchNew=e.extend({days:"3,30,90",depth:"folder",reference:"added",sinceLastVisit:!0},t.searchNew);var s=t.searchNew.days.split(",");a.append(e("<label>",{text:I(t.searchNew.reference)}));for(var n=0;n<s.length;n++)a.append(e("<a>",{class:"smallbtn",text:getTimespan(s[n])}).data("days",parseInt(s[n],10)).on("click",function(){L(e(this).data("days"))}));if(t.searchNew.sinceLastVisit){var o=e.cookie("lastVisit"),l=Math.ceil(new Date/864e5);o&&o<l&&a.append(e("<a>",{class:"smallbtn",text:i.sinceMyLastVisit}).on("click",function(){L(l-o)})),e.cookie("lastVisit",l,31536e4)}}},E=function(a,s){o.hasShop()&&(a.find(".selectable").length?(a.selectable({cardClass:"selectable",checkedClass:t.checkedClass,anySelected:function(){e("#selectnone, #add-selected").removeClass("disabled")},noneSelected:function(){e("#selectnone, #add-selected").addClass("disabled")}}),e("#shop").show(),e("#selectall").removeClass("disabled")):e("#shop").hide(),e("#selectnone, #add-selected").addClass("disabled")),a.find("."+t.lbableClass).length?(a.trigger("lightboxRemove"),a.lightbox(o,{baseSet:typeof s!==UNDEF&&s,onLoadStart:function(e){var a=e.data(J.OBJ);a&&addParam(t.indexName,{img:o.getItemName(a)},a[J.TITLE])},onLoadEnd:function(e){a.trigger("setactivethumb",e).trigger("refresh")},onClose:function(){removeParam(t.indexName,"img")},onReady:function(){if(d&&window.location.hash){d=!1;var a=readParam();if(a.hasOwnProperty("label"))T(a.label,function(){addParam(t.indexName,{label:a.label,search:null,newimages:null},i.label+": "+a.label)});else if(a.hasOwnProperty("search"))D(a.search,function(){addParam(t.indexName,{search:a.search,label:null,newimages:null},i.search+": "+a.search)});else if(a.hasOwnProperty("newimages"))F(a.newimages,function(){addParam(t.indexName,{newimages:a.newimages,search:null,label:null},i.searchNew+": "+a.searchNew)});else if(a.hasOwnProperty("img")){var s=y(encodeURIComponent(a.img));s.length?v().trigger("lightboxLoad",s):removeParam(t.indexName,"img")}}e("."+t.startshowClass).fadeIn().children(".button").on("click",q)},onSlideshowStart:function(){t.hasOwnProperty("backgroundMusic")&&t.backgroundMusic.slideshowControl&&e(t.backgroundMusic.hook).trigger("startPlayer")},onSlideshowPause:function(){t.hasOwnProperty("backgroundMusic")&&t.backgroundMusic.slideshowControl&&e(t.backgroundMusic.hook).trigger("pausePlayer")}})):(e("."+t.startshowClass).fadeOut(),e("#selectall, #selectnone, #add-selected").addClass("disabled"))},q=function(e){var a=v("."+t.activeClass+":first-child");return a.length||(a=v("."+t.cardClass+":first-child")),a.length&&v().trigger("lightboxLoad",[a,!0]),!1},z=function(e){for(var a=[],t=0;t<e.length;t++)e[t].hasOwnProperty("location")&&a.push(e[t].hasOwnProperty("title")?{title:e[t].title,pos:e[t].location,link:e[t].path}:{pos:e[t].location,link:e[t].path});return a},H=function(){var a=o.getImages();v("."+t.cardClass+">a").each(function(){e(this).data("href",this.href).attr("href","")}),U(),e.fn.hasOwnProperty("paypal")&&(e.fn.paypal.defaults.relPath=t.relPath,e.fn.paypal.defaults.rootPath=t.rootPath,(n=e("#shop-root").paypal(o))&&(e("#selectall").on("click",function(){return v().trigger("selectAll"),!1}),e("#selectnone").on("click",function(){return v().trigger("selectNone"),!1}),e("#add-selected").on("click",function(){return n.trigger("addItems",w(!0)),v().trigger("selectNone"),!1}),e("#add-all").on("click",function(){return n.trigger("addItems",k()),!1}),e.fn.lightbox.defaults.hasOwnProperty("shop")||(e.fn.lightbox.defaults.shop={}),e.fn.lightbox.defaults.shop.root=n)),a.length?(C().renderThumbs(a,E,!0),t.hasOwnProperty("map")&&t.map.index&&e(".map-root").addMap({markers:z(a),type:t.map.indexType||"roadmap",click:function(){if(this.link){var e=y(this.link);e.length&&(g(),v().trigger("lightboxLoad",e))}}})):window.location.hash&&V(),t.hasOwnProperty("tagCloud")&&(t.tagCloud.hasOwnProperty("searchHook")&&S(),o.collectTags(e.extend(t.tagCloud,{exact:t.exactFields,ready:function(){N(this)}}))),t.hasOwnProperty("search")&&M(e(t.search.hook)),t.hasOwnProperty("searchNew")&&A(e(t.searchNew.hook)),t.hasOwnProperty("folderTree")&&e(t.folderTree.hook).append(O())},_=function(){t.hasOwnProperty("search")&&M(e(t.search.hook))},R=function(){var a,s=o.getFolders();b("."+t.cardClass+"."+t.folderClass).each(function(n){n<s.length&&s[n].hasOwnProperty(J.MODIFIEDDAYS)&&(a=s[n][J.MODIFIEDDAYS],h-a<t.markNew&&e(this).find("."+t.thumbClass).append(e("<span>",{class:"icon-star new-image"}).data("tooltip",new Date(864e5*a).toLocaleDateString()).addTooltip()))})},U=function(){var e=null;b("."+t.cardClass).length&&(t.markNew&&setTimeout(R,300),b().matchHeight({delegate:t.cardClass,match:[t.thumbClass,t.cardClass]}),a.on("scroll resize orientationchange",function(a){return clearTimeout(e),e=setTimeout(P,t.scrollCheckInterval),!0}),P())},B=function(){if(!e.cookie("cookiePolicy")){var a=e("<div>",{id:"cookiepolicy"}).appendTo(s),n=e("<p>",{html:i.cookiePolicyText}).appendTo(a);t.cookiePolicyUrl&&n.append(e("<a>",{text:i.cookiePolicyLearnMore,target:"_blank",href:t.cookiePolicyUrl})),n.append(e("<a>",{class:"smallbtn",text:i.cookiePolicyAgree}).on("click",function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()}),e.cookie("cookiePolicy",!0,36e6)})),a.fadeIn(500),setTimeout(function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()})},6e3)}},V=function(){if(window.location.hash!==c){c=window.location.hash;var e=readParam();if(e.hasOwnProperty("label"))T(e.label,function(){setParam(t.indexName,{label:e.label},i.label+": "+e.label),j()});else if(e.hasOwnProperty("search"))D(e.search,function(){setParam(t.indexName,{search:e.search},i.search+": "+e.search),j()});else if(e.hasOwnProperty("newimages"))F(e.newimages,function(){setParam(t.indexName,{newimages:e.newimages},i.newImages+": "+e.newimages),j()});else if(e.hasOwnProperty("img")){var a=y(e.img);a.length?v().trigger("lightboxLoad",a):removeParam(t.indexName,"img")}else v().trigger("lightboxQuit"),g()}},j=function(){t.hasOwnProperty("share")&&v().trigger("lightboxContainer").is(":visible")&&e(t.share.hook).trigger("updateLinks")};window.location.search&&removeSearch(),typeof Album===UNDEF&&console.log("Critical Error: Missing jalbum.album.js library!"),o=new Album(e,{indexName:t.indexName,rootPath:t.rootPath,relPath:t.relPath,audioPoster:t.audioPoster,videoPoster:t.videoPoster,ready:"index"===t.pageType?H:_}),t.hasOwnProperty("showCookiePolicy")&&t.showCookiePolicy&&setTimeout(B,2e3),(l=e.cookie(e("title").text()+"_thumbDims"))&&t.hasOwnProperty("thumbDims")&&l===t.thumbDims?l="":(l="#"+(l||t.thumbDims),e.cookie(e("title").text()+"_thumbDims",t.thumbDims)),t.rightClickProtect&&e("."+t.folderContClass+",."+t.sliderClass).on("contextmenu","img",function(e){return e.preventDefault(),!1}),t.hasOwnProperty("map")&&(t.map.hasOwnProperty("type")&&(e.fn.lightbox.defaults.mapType=t.map.type,e.fn.addMap.defaults.type=t.map.type),t.map.hasOwnProperty("zoom")&&(e.fn.lightbox.defaults.mapZoom=t.map.zoom,e.fn.addMap.defaults.zoom=t.map.zoom),t.map.hasOwnProperty("apiKey")&&(e.fn.addMap.defaults.apiKey=t.map.apiKey)),passDefaults(t,e.fn.lightbox.defaults,"indexName,level,previousFoldersLast,nextFoldersFirst,rightClickProtect,enableKeyboard,enableMouseWheel,extraSizes,lbableClass"),passDefaults(t.lightbox,e.fn.lightbox.defaults),t.hasOwnProperty("share")&&(e.fn.renderShares.defaults.buttonTheme=t.share.buttonTheme||"dark",e(t.share.hook).renderShares(t.share),e.fn.lightbox.defaults.share=t.share.sites),e("[data-audioPlayer]").length&&e("[data-audioPlayer]").audioPlayer({rootPath:t.rootPath}),a.on("hashchange",V)},e.fn.skin.defaults={contentHook:"article.cont",sliderClass:"slider",folderContClass:"folder-cont",folderClass:"folder",thumbContClass:"thumb-cont",thumbGridClass:"caption-below small-up-2 medium-up-3 large-up-4",thumbsClass:"thumbnails",thumbClass:"thumb",verticalMiddleClass:"vertical-middle",cardClass:"card",lbableClass:"lbable",captionClass:"caption",commentClass:"comment",hascaptionClass:"hascaption",checkedClass:"checked",activeClass:"active",lazyloadClass:"lazyload",startshowClass:"startshow",folderCols:2,scrollCheckInterval:100,indexName:"index.html",audioPoster:"audio.poster.png",videoPoster:"video.poster.png",exactFields:"creator,keywords",fixGrid:!1,autoStart:!1,scaleUp:!1,rightClickProtect:!1,enableKeyboard:!0,videoAuto:!0}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));
